{"version":3,"file":"IteratorContainer-IYqmKkrA.js","sources":["../../../../../../packages/ui/src/iterator-container/src/IteratorContainer.vue"],"sourcesContent":["<template>\n  <div class=\"magic-ui-iterator-container\">\n    <Container v-for=\"(item, index) in configs\" :key=\"index\" :config=\"item\"></Container>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed } from 'vue';\n\nimport { type DisplayCond, type MContainer, NodeType } from '@tmagic/schema';\nimport { useApp } from '@tmagic/vue-runtime-help';\n\nimport Container from '../../container';\n\nconst props = withDefaults(\n  defineProps<{\n    config: MContainer & {\n      type: 'iterator-container';\n      iteratorData: any[];\n      dsField: string[];\n      itemConfig: {\n        layout: string;\n        displayConds: DisplayCond[];\n        style: Record<string, string | number>;\n      };\n    };\n    model?: any;\n  }>(),\n  {\n    model: () => ({}),\n  },\n);\n\nconst { app } = useApp({\n  config: props.config,\n  methods: {},\n});\n\nconst configs = computed(() => {\n  let { iteratorData = [] } = props.config;\n\n  if (!Array.isArray(iteratorData)) {\n    iteratorData = [];\n  }\n\n  if (app?.platform === 'editor' && !iteratorData.length) {\n    iteratorData.push({});\n  }\n\n  return iteratorData.map((itemData) => {\n    const condResult =\n      app?.platform !== 'editor'\n        ? app?.dataSourceManager?.compliedIteratorItemConds(itemData, props.config.itemConfig.displayConds) ?? true\n        : true;\n\n    return {\n      items:\n        app?.dataSourceManager?.compliedIteratorItems(itemData, props.config.items, props.config.dsField) ??\n        props.config.items,\n      id: '',\n      type: NodeType.CONTAINER,\n      condResult,\n      style: {\n        ...props.config.itemConfig.style,\n        position: 'relative',\n        left: 0,\n        top: 0,\n      },\n    };\n  });\n});\n</script>\n"],"names":["props","__props","app","useApp","configs","iteratorData","itemData","condResult","_b","_a","_d","_c","NodeType"],"mappings":"yVAcA,MAAAA,EAAAC,EAmBA,CAAA,IAAAC,CAAA,EAAAC,EAAA,CAAuB,OAAAH,EAAA,OACP,QAAA,CAAA,CACJ,CAAA,EAGZI,EAAgB,kBACd,GAAA,CAAA,aAAAC,EAAA,CAAA,GAAAL,EAAA,OAEA,OAAA,MAAA,QAAAK,CAAA,IACEA,EAAA,CAAA,IAGFH,GAAA,YAAAA,EAAA,YAAA,UAAA,CAAAG,EAAA,QACEA,EAAA,KAAA,CAAA,CAAA,EAGFA,EAAA,IAAAC,GAAA,aACE,MAAAC,GAAAL,GAAA,YAAAA,EAAA,YAAA,WAAAM,GAAAC,EAAAP,GAAA,YAAAA,EAAA,oBAAA,YAAAO,EAAA,0BAAAH,EAAAN,EAAA,OAAA,WAAA,gBAAA,KAAAQ,EAAA,GAKA,MAAA,CAAO,OAAAE,GAAAC,EAAAT,GAAA,YAAAA,EAAA,oBAAA,YAAAS,EAAA,sBAAAL,EAAAN,EAAA,OAAA,MAAAA,EAAA,OAAA,WAAA,KAAAU,EAAAV,EAAA,OAAA,MAGU,GAAA,GACX,KAAAY,EAAA,UACW,WAAAL,EACf,MAAA,CACO,GAAAP,EAAA,OAAA,WAAA,MACsB,SAAA,WACjB,KAAA,EACJ,IAAA,CACD,CACP,CACF,CAAA,CACD,CAAA"}