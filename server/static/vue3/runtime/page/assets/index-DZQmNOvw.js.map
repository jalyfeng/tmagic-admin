{"version":3,"file":"index-DZQmNOvw.js","sources":["../../../../../../packages/ui/src/overlay/src/index.vue"],"sourcesContent":["<template>\n  <magic-ui-container v-if=\"visible\" class=\"magic-ui-overlay\" :config=\"{ items: config.items }\">\n    <slot></slot>\n  </magic-ui-container>\n</template>\n\n<script lang=\"ts\" setup>\nimport { onBeforeUnmount, ref } from 'vue';\n\nimport type { MContainer, MNode, MPage } from '@tmagic/schema';\nimport { useApp } from '@tmagic/vue-runtime-help';\n\ninterface OverlaySchema extends MContainer {\n  type: 'overlay';\n}\n\nconst props = withDefaults(\n  defineProps<{\n    config: OverlaySchema;\n    model?: any;\n  }>(),\n  {\n    model: () => ({}),\n  },\n);\n\nconst visible = ref(false);\n\nconst { app, node } = useApp({\n  config: props.config,\n  methods: {\n    openOverlay() {\n      visible.value = true;\n      app?.emit('overlay:open', node);\n    },\n    closeOverlay() {\n      visible.value = false;\n      app?.emit('overlay:close', node);\n    },\n  },\n});\n\nconst editorSelectHandler = (\n  info: {\n    node: MNode;\n    page: MPage;\n    parent: MContainer;\n  },\n  path: MNode[],\n) => {\n  if (path.find((node: MNode) => node.id === props.config.id)) {\n    node?.instance.openOverlay();\n  } else {\n    node?.instance.closeOverlay();\n  }\n};\n\napp?.page?.on('editor:select', editorSelectHandler);\n\nonBeforeUnmount(() => {\n  app?.page?.off('editor:select', editorSelectHandler);\n});\n</script>\n"],"names":["props","__props","visible","app","node","useApp","editorSelectHandler","info","path","node2","_a"],"mappings":"0IAgBA,MAAAA,EAAAC,EAUAC,EAAgB,YAEhB,CAAA,IAAAC,EAAA,KAAAC,CAAA,EAAAC,EAAA,CAA6B,OAAAL,EAAA,OACb,QAAA,CACL,aAAA,CAELE,EAAA,MAAA,GACAC,GAAA,MAAAA,EAAA,KAAA,eAAAC,EAA8B,EAChC,cAAA,CAEEF,EAAA,MAAA,GACAC,GAAA,MAAAA,EAAA,KAAA,gBAAAC,EAA+B,CACjC,CACF,CAAA,EAGFE,EAAA,CAAAC,EAAAC,IAAA,CAQEA,EAAA,KAAAC,GAAAA,EAAA,KAAAT,EAAA,OAAA,EAAA,EACEI,GAAA,MAAAA,EAAA,SAAA,cAEAA,GAAA,MAAAA,EAAA,SAAA,cACF,EAGF,OAAAM,EAAAP,GAAA,YAAAA,EAAA,OAAA,MAAAO,EAAA,GAAA,gBAAAJ,GAEA,IAAA,gBAAA,IAAA,QACEI,EAAAP,GAAA,YAAAA,EAAA,OAAA,MAAAO,EAAA,IAAA,gBAAAJ,EAAmD,CAAA"}