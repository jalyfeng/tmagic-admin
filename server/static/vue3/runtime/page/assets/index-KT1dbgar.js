const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BicplLQH.js","assets/Container.vue_vue_type_script_setup_true_lang-DKzEI3kK.js","assets/useApp-khRuD069.js","assets/Container-IwYRRjCv.js","assets/index-DmhHaABp.js","assets/index-Ddxyt43W.js","assets/index-CzRIRZob.js","assets/index-D5otBju9.js","assets/index-DZQmNOvw.js","assets/PageFragmentContainer-B-4aH-Rc.js","assets/tmagic-schema-DibTnBgo.js","assets/PageFragmentContainer-C9liEODB.css","assets/PageFragment-DCtNB9MZ.js","assets/IteratorContainer-IYqmKkrA.js"])))=>i.map(i=>d[i]);
var ye=Object.defineProperty;var $e=e=>{throw TypeError(e)};var be=(e,r,n)=>r in e?ye(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var m=(e,r,n)=>be(e,typeof r!="symbol"?r+"":r,n),me=(e,r,n)=>r.has(e)||$e("Cannot "+n);var k=(e,r,n)=>(me(e,r,"read from private field"),n?n.call(e):r.get(e)),K=(e,r,n)=>r.has(e)?$e("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,n),z=(e,r,n,s)=>(me(e,r,"write to private field"),s?s.call(e,n):r.set(e,n),n);function __vite_legacy_guard(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(i){if(i.ep)return;i.ep=!0;const c=n(i);fetch(i.href,c)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(r,n,s){return Function.prototype.apply.call(r,n,s)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:ReflectOwnKeys=function(r){return Object.getOwnPropertyNames(r)};function ProcessEmitWarning(e){console&&console.warn&&console.warn(e)}var NumberIsNaN=Number.isNaN||function(r){return r!==r};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");defaultMaxListeners=e}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||NumberIsNaN(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this};function _getMaxListeners(e){return e._maxListeners===void 0?EventEmitter.defaultMaxListeners:e._maxListeners}EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function(r){for(var n=[],s=1;s<arguments.length;s++)n.push(arguments[s]);var i=r==="error",c=this._events;if(c!==void 0)i=i&&c.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var l=c[r];if(l===void 0)return!1;if(typeof l=="function")ReflectApply(l,this,n);else for(var f=l.length,d=arrayClone(l,f),s=0;s<f;++s)ReflectApply(d[s],this,n);return!0};function _addListener(e,r,n,s){var i,c,o;if(checkListener(n),c=e._events,c===void 0?(c=e._events=Object.create(null),e._eventsCount=0):(c.newListener!==void 0&&(e.emit("newListener",r,n.listener?n.listener:n),c=e._events),o=c[r]),o===void 0)o=c[r]=n,++e._eventsCount;else if(typeof o=="function"?o=c[r]=s?[n,o]:[o,n]:s?o.unshift(n):o.push(n),i=_getMaxListeners(e),i>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=r,u.count=o.length,ProcessEmitWarning(u)}return e}EventEmitter.prototype.addListener=function(r,n){return _addListener(this,r,n,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function(r,n){return _addListener(this,r,n,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(e,r,n){var s={fired:!1,wrapFn:void 0,target:e,type:r,listener:n},i=onceWrapper.bind(s);return i.listener=n,s.wrapFn=i,i}EventEmitter.prototype.once=function(r,n){return checkListener(n),this.on(r,_onceWrap(this,r,n)),this};EventEmitter.prototype.prependOnceListener=function(r,n){return checkListener(n),this.prependListener(r,_onceWrap(this,r,n)),this};EventEmitter.prototype.removeListener=function(r,n){var s,i,c,o,u;if(checkListener(n),i=this._events,i===void 0)return this;if(s=i[r],s===void 0)return this;if(s===n||s.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[r],i.removeListener&&this.emit("removeListener",r,s.listener||n));else if(typeof s!="function"){for(c=-1,o=s.length-1;o>=0;o--)if(s[o]===n||s[o].listener===n){u=s[o].listener,c=o;break}if(c<0)return this;c===0?s.shift():spliceOne(s,c),s.length===1&&(i[r]=s[0]),i.removeListener!==void 0&&this.emit("removeListener",r,u||n)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function(r){var n,s,i;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[r]),this;if(arguments.length===0){var c=Object.keys(s),o;for(i=0;i<c.length;++i)o=c[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=s[r],typeof n=="function")this.removeListener(r,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(r,n[i]);return this};function _listeners(e,r,n){var s=e._events;if(s===void 0)return[];var i=s[r];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?unwrapListeners(i):arrayClone(i,i.length)}EventEmitter.prototype.listeners=function(r){return _listeners(this,r,!0)};EventEmitter.prototype.rawListeners=function(r){return _listeners(this,r,!1)};EventEmitter.listenerCount=function(e,r){return typeof e.listenerCount=="function"?e.listenerCount(r):listenerCount.call(e,r)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(e){var r=this._events;if(r!==void 0){var n=r[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(e,r){for(var n=new Array(r),s=0;s<r;++s)n[s]=e[s];return n}function spliceOne(e,r){for(;r+1<e.length;r++)e[r]=e[r+1];e.pop()}function unwrapListeners(e){for(var r=new Array(e.length),n=0;n<r.length;++n)r[n]=e[n].listener||e[n];return r}function once(e,r){return new Promise(function(n,s){function i(o){e.removeListener(r,c),s(o)}function c(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}eventTargetAgnosticAddListener(e,r,c,{once:!0}),r!=="error"&&addErrorHandlerIfEventEmitter(e,i,{once:!0})})}function addErrorHandlerIfEventEmitter(e,r,n){typeof e.on=="function"&&eventTargetAgnosticAddListener(e,"error",r,n)}function eventTargetAgnosticAddListener(e,r,n,s){if(typeof e.on=="function")s.once?e.once(r,n):e.on(r,n);else if(typeof e.addEventListener=="function")e.addEventListener(r,function i(c){s.once&&e.removeEventListener(r,i),n(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var eventsExports=events.exports;const EventEmitter$1=getDefaultExportFromCjs(eventsExports);var freeGlobal$1=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf$1=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal$1||freeSelf$1||Function("return this")(),Symbol$2=root$1.Symbol,objectProto$u=Object.prototype,hasOwnProperty$o=objectProto$u.hasOwnProperty,nativeObjectToString$3=objectProto$u.toString,symToStringTag$3=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag$1(e){var r=hasOwnProperty$o.call(e,symToStringTag$3),n=e[symToStringTag$3];try{e[symToStringTag$3]=void 0;var s=!0}catch(c){}var i=nativeObjectToString$3.call(e);return s&&(r?e[symToStringTag$3]=n:delete e[symToStringTag$3]),i}var objectProto$t=Object.prototype,nativeObjectToString$2=objectProto$t.toString;function objectToString$1(e){return nativeObjectToString$2.call(e)}var nullTag$1="[object Null]",undefinedTag$1="[object Undefined]",symToStringTag$2=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$1(e){return e==null?e===void 0?undefinedTag$1:nullTag$1:symToStringTag$2&&symToStringTag$2 in Object(e)?getRawTag$1(e):objectToString$1(e)}function isObjectLike$1(e){return e!=null&&typeof e=="object"}var symbolTag$5="[object Symbol]";function isSymbol$1(e){return typeof e=="symbol"||isObjectLike$1(e)&&baseGetTag$1(e)==symbolTag$5}function arrayMap$1(e,r){for(var n=-1,s=e==null?0:e.length,i=Array(s);++n<s;)i[n]=r(e[n],n,e);return i}var isArray$2=Array.isArray,INFINITY$3=1/0,symbolProto$3=Symbol$2?Symbol$2.prototype:void 0,symbolToString$1=symbolProto$3?symbolProto$3.toString:void 0;function baseToString$1(e){if(typeof e=="string")return e;if(isArray$2(e))return arrayMap$1(e,baseToString$1)+"";if(isSymbol$1(e))return symbolToString$1?symbolToString$1.call(e):"";var r=e+"";return r=="0"&&1/e==-INFINITY$3?"-0":r}function isObject$4(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var asyncTag$1="[object AsyncFunction]",funcTag$5="[object Function]",genTag$3="[object GeneratorFunction]",proxyTag$1="[object Proxy]";function isFunction$2(e){if(!isObject$4(e))return!1;var r=baseGetTag$1(e);return r==funcTag$5||r==genTag$3||r==asyncTag$1||r==proxyTag$1}var coreJsData$1=root$1["__core-js_shared__"],maskSrcKey$1=function(){var e=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked$1(e){return!!maskSrcKey$1&&maskSrcKey$1 in e}var funcProto$4=Function.prototype,funcToString$4=funcProto$4.toString;function toSource$1(e){if(e!=null){try{return funcToString$4.call(e)}catch(r){}try{return e+""}catch(r){}}return""}var reRegExpChar$1=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor$1=/^\[object .+?Constructor\]$/,funcProto$3=Function.prototype,objectProto$s=Object.prototype,funcToString$3=funcProto$3.toString,hasOwnProperty$n=objectProto$s.hasOwnProperty,reIsNative$1=RegExp("^"+funcToString$3.call(hasOwnProperty$n).replace(reRegExpChar$1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(e){if(!isObject$4(e)||isMasked$1(e))return!1;var r=isFunction$2(e)?reIsNative$1:reIsHostCtor$1;return r.test(toSource$1(e))}function getValue$1(e,r){return e==null?void 0:e[r]}function getNative$1(e,r){var n=getValue$1(e,r);return baseIsNative$1(n)?n:void 0}var WeakMap$2=getNative$1(root$1,"WeakMap"),objectCreate$1=Object.create,baseCreate$1=function(){function e(){}return function(r){if(!isObject$4(r))return{};if(objectCreate$1)return objectCreate$1(r);e.prototype=r;var n=new e;return e.prototype=void 0,n}}();function copyArray(e,r){var n=-1,s=e.length;for(r||(r=Array(s));++n<s;)r[n]=e[n];return r}var defineProperty$1=function(){try{var e=getNative$1(Object,"defineProperty");return e({},"",{}),e}catch(r){}}();function arrayEach$1(e,r){for(var n=-1,s=e==null?0:e.length;++n<s&&r(e[n],n,e)!==!1;);return e}var MAX_SAFE_INTEGER$3=9007199254740991,reIsUint$1=/^(?:0|[1-9]\d*)$/;function isIndex$1(e,r){var n=typeof e;return r=r==null?MAX_SAFE_INTEGER$3:r,!!r&&(n=="number"||n!="symbol"&&reIsUint$1.test(e))&&e>-1&&e%1==0&&e<r}function baseAssignValue$1(e,r,n){r=="__proto__"&&defineProperty$1?defineProperty$1(e,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[r]=n}function eq$1(e,r){return e===r||e!==e&&r!==r}var objectProto$r=Object.prototype,hasOwnProperty$m=objectProto$r.hasOwnProperty;function assignValue$1(e,r,n){var s=e[r];(!(hasOwnProperty$m.call(e,r)&&eq$1(s,n))||n===void 0&&!(r in e))&&baseAssignValue$1(e,r,n)}function copyObject$1(e,r,n,s){var i=!n;n||(n={});for(var c=-1,o=r.length;++c<o;){var u=r[c],l=void 0;l===void 0&&(l=e[u]),i?baseAssignValue$1(n,u,l):assignValue$1(n,u,l)}return n}var MAX_SAFE_INTEGER$2=9007199254740991;function isLength$1(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER$2}function isArrayLike$1(e){return e!=null&&isLength$1(e.length)&&!isFunction$2(e)}var objectProto$q=Object.prototype;function isPrototype$1(e){var r=e&&e.constructor,n=typeof r=="function"&&r.prototype||objectProto$q;return e===n}function baseTimes$1(e,r){for(var n=-1,s=Array(e);++n<e;)s[n]=r(n);return s}var argsTag$5="[object Arguments]";function baseIsArguments$1(e){return isObjectLike$1(e)&&baseGetTag$1(e)==argsTag$5}var objectProto$p=Object.prototype,hasOwnProperty$l=objectProto$p.hasOwnProperty,propertyIsEnumerable$3=objectProto$p.propertyIsEnumerable,isArguments$1=baseIsArguments$1(function(){return arguments}())?baseIsArguments$1:function(e){return isObjectLike$1(e)&&hasOwnProperty$l.call(e,"callee")&&!propertyIsEnumerable$3.call(e,"callee")};function stubFalse$1(){return!1}var freeExports$5=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$5=freeExports$5&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$5=freeModule$5&&freeModule$5.exports===freeExports$5,Buffer$3=moduleExports$5?root$1.Buffer:void 0,nativeIsBuffer$1=Buffer$3?Buffer$3.isBuffer:void 0,isBuffer$2=nativeIsBuffer$1||stubFalse$1,argsTag$4="[object Arguments]",arrayTag$3="[object Array]",boolTag$5="[object Boolean]",dateTag$5="[object Date]",errorTag$4="[object Error]",funcTag$4="[object Function]",mapTag$a="[object Map]",numberTag$5="[object Number]",objectTag$6="[object Object]",regexpTag$5="[object RegExp]",setTag$a="[object Set]",stringTag$5="[object String]",weakMapTag$5="[object WeakMap]",arrayBufferTag$5="[object ArrayBuffer]",dataViewTag$7="[object DataView]",float32Tag$5="[object Float32Array]",float64Tag$5="[object Float64Array]",int8Tag$5="[object Int8Array]",int16Tag$5="[object Int16Array]",int32Tag$5="[object Int32Array]",uint8Tag$5="[object Uint8Array]",uint8ClampedTag$5="[object Uint8ClampedArray]",uint16Tag$5="[object Uint16Array]",uint32Tag$5="[object Uint32Array]",typedArrayTags$1={};typedArrayTags$1[float32Tag$5]=typedArrayTags$1[float64Tag$5]=typedArrayTags$1[int8Tag$5]=typedArrayTags$1[int16Tag$5]=typedArrayTags$1[int32Tag$5]=typedArrayTags$1[uint8Tag$5]=typedArrayTags$1[uint8ClampedTag$5]=typedArrayTags$1[uint16Tag$5]=typedArrayTags$1[uint32Tag$5]=!0;typedArrayTags$1[argsTag$4]=typedArrayTags$1[arrayTag$3]=typedArrayTags$1[arrayBufferTag$5]=typedArrayTags$1[boolTag$5]=typedArrayTags$1[dataViewTag$7]=typedArrayTags$1[dateTag$5]=typedArrayTags$1[errorTag$4]=typedArrayTags$1[funcTag$4]=typedArrayTags$1[mapTag$a]=typedArrayTags$1[numberTag$5]=typedArrayTags$1[objectTag$6]=typedArrayTags$1[regexpTag$5]=typedArrayTags$1[setTag$a]=typedArrayTags$1[stringTag$5]=typedArrayTags$1[weakMapTag$5]=!1;function baseIsTypedArray$1(e){return isObjectLike$1(e)&&isLength$1(e.length)&&!!typedArrayTags$1[baseGetTag$1(e)]}function baseUnary$1(e){return function(r){return e(r)}}var freeExports$4=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$4=freeExports$4&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$4=freeModule$4&&freeModule$4.exports===freeExports$4,freeProcess$1=moduleExports$4&&freeGlobal$1.process,nodeUtil$1=function(){try{var e=freeModule$4&&freeModule$4.require&&freeModule$4.require("util").types;return e||freeProcess$1&&freeProcess$1.binding&&freeProcess$1.binding("util")}catch(r){}}(),nodeIsTypedArray$1=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray$1=nodeIsTypedArray$1?baseUnary$1(nodeIsTypedArray$1):baseIsTypedArray$1,objectProto$o=Object.prototype,hasOwnProperty$k=objectProto$o.hasOwnProperty;function arrayLikeKeys$1(e,r){var n=isArray$2(e),s=!n&&isArguments$1(e),i=!n&&!s&&isBuffer$2(e),c=!n&&!s&&!i&&isTypedArray$1(e),o=n||s||i||c,u=o?baseTimes$1(e.length,String):[],l=u.length;for(var f in e)(r||hasOwnProperty$k.call(e,f))&&!(o&&(f=="length"||i&&(f=="offset"||f=="parent")||c&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||isIndex$1(f,l)))&&u.push(f);return u}function overArg$1(e,r){return function(n){return e(r(n))}}var nativeKeys$1=overArg$1(Object.keys,Object),objectProto$n=Object.prototype,hasOwnProperty$j=objectProto$n.hasOwnProperty;function baseKeys$1(e){if(!isPrototype$1(e))return nativeKeys$1(e);var r=[];for(var n in Object(e))hasOwnProperty$j.call(e,n)&&n!="constructor"&&r.push(n);return r}function keys$1(e){return isArrayLike$1(e)?arrayLikeKeys$1(e):baseKeys$1(e)}function nativeKeysIn$1(e){var r=[];if(e!=null)for(var n in Object(e))r.push(n);return r}var objectProto$m=Object.prototype,hasOwnProperty$i=objectProto$m.hasOwnProperty;function baseKeysIn$1(e){if(!isObject$4(e))return nativeKeysIn$1(e);var r=isPrototype$1(e),n=[];for(var s in e)s=="constructor"&&(r||!hasOwnProperty$i.call(e,s))||n.push(s);return n}function keysIn$1(e){return isArrayLike$1(e)?arrayLikeKeys$1(e,!0):baseKeysIn$1(e)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,r){if(isArray$2(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||isSymbol$1(e)?!0:reIsPlainProp.test(e)||!reIsDeepProp.test(e)||r!=null&&e in Object(r)}var nativeCreate$1=getNative$1(Object,"create");function hashClear$1(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete$1(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var HASH_UNDEFINED$4="__lodash_hash_undefined__",objectProto$l=Object.prototype,hasOwnProperty$h=objectProto$l.hasOwnProperty;function hashGet$1(e){var r=this.__data__;if(nativeCreate$1){var n=r[e];return n===HASH_UNDEFINED$4?void 0:n}return hasOwnProperty$h.call(r,e)?r[e]:void 0}var objectProto$k=Object.prototype,hasOwnProperty$g=objectProto$k.hasOwnProperty;function hashHas$1(e){var r=this.__data__;return nativeCreate$1?r[e]!==void 0:hasOwnProperty$g.call(r,e)}var HASH_UNDEFINED$3="__lodash_hash_undefined__";function hashSet$1(e,r){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nativeCreate$1&&r===void 0?HASH_UNDEFINED$3:r,this}function Hash$1(e){var r=-1,n=e==null?0:e.length;for(this.clear();++r<n;){var s=e[r];this.set(s[0],s[1])}}Hash$1.prototype.clear=hashClear$1;Hash$1.prototype.delete=hashDelete$1;Hash$1.prototype.get=hashGet$1;Hash$1.prototype.has=hashHas$1;Hash$1.prototype.set=hashSet$1;function listCacheClear$1(){this.__data__=[],this.size=0}function assocIndexOf$1(e,r){for(var n=e.length;n--;)if(eq$1(e[n][0],r))return n;return-1}var arrayProto$1=Array.prototype,splice$1=arrayProto$1.splice;function listCacheDelete$1(e){var r=this.__data__,n=assocIndexOf$1(r,e);if(n<0)return!1;var s=r.length-1;return n==s?r.pop():splice$1.call(r,n,1),--this.size,!0}function listCacheGet$1(e){var r=this.__data__,n=assocIndexOf$1(r,e);return n<0?void 0:r[n][1]}function listCacheHas$1(e){return assocIndexOf$1(this.__data__,e)>-1}function listCacheSet$1(e,r){var n=this.__data__,s=assocIndexOf$1(n,e);return s<0?(++this.size,n.push([e,r])):n[s][1]=r,this}function ListCache$1(e){var r=-1,n=e==null?0:e.length;for(this.clear();++r<n;){var s=e[r];this.set(s[0],s[1])}}ListCache$1.prototype.clear=listCacheClear$1;ListCache$1.prototype.delete=listCacheDelete$1;ListCache$1.prototype.get=listCacheGet$1;ListCache$1.prototype.has=listCacheHas$1;ListCache$1.prototype.set=listCacheSet$1;var Map$2=getNative$1(root$1,"Map");function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash$1,map:new(Map$2||ListCache$1),string:new Hash$1}}function isKeyable$1(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}function getMapData$1(e,r){var n=e.__data__;return isKeyable$1(r)?n[typeof r=="string"?"string":"hash"]:n.map}function mapCacheDelete$1(e){var r=getMapData$1(this,e).delete(e);return this.size-=r?1:0,r}function mapCacheGet$1(e){return getMapData$1(this,e).get(e)}function mapCacheHas$1(e){return getMapData$1(this,e).has(e)}function mapCacheSet$1(e,r){var n=getMapData$1(this,e),s=n.size;return n.set(e,r),this.size+=n.size==s?0:1,this}function MapCache$1(e){var r=-1,n=e==null?0:e.length;for(this.clear();++r<n;){var s=e[r];this.set(s[0],s[1])}}MapCache$1.prototype.clear=mapCacheClear$1;MapCache$1.prototype.delete=mapCacheDelete$1;MapCache$1.prototype.get=mapCacheGet$1;MapCache$1.prototype.has=mapCacheHas$1;MapCache$1.prototype.set=mapCacheSet$1;var FUNC_ERROR_TEXT="Expected a function";function memoize(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(FUNC_ERROR_TEXT);var n=function(){var s=arguments,i=r?r.apply(this,s):s[0],c=n.cache;if(c.has(i))return c.get(i);var o=e.apply(this,s);return n.cache=c.set(i,o)||c,o};return n.cache=new(memoize.Cache||MapCache$1),n}memoize.Cache=MapCache$1;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var r=memoize(e,function(s){return n.size===MAX_MEMOIZE_SIZE&&n.clear(),s}),n=r.cache;return r}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(rePropName,function(n,s,i,c){r.push(i?c.replace(reEscapeChar,"$1"):s||n)}),r});function toString$2(e){return e==null?"":baseToString$1(e)}function castPath(e,r){return isArray$2(e)?e:isKey(e,r)?[e]:stringToPath(toString$2(e))}var INFINITY$2=1/0;function toKey(e){if(typeof e=="string"||isSymbol$1(e))return e;var r=e+"";return r=="0"&&1/e==-INFINITY$2?"-0":r}function arrayPush$1(e,r){for(var n=-1,s=r.length,i=e.length;++n<s;)e[i+n]=r[n];return e}var getPrototype$1=overArg$1(Object.getPrototypeOf,Object);function stackClear$1(){this.__data__=new ListCache$1,this.size=0}function stackDelete$1(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}function stackGet$1(e){return this.__data__.get(e)}function stackHas$1(e){return this.__data__.has(e)}var LARGE_ARRAY_SIZE$2=200;function stackSet$1(e,r){var n=this.__data__;if(n instanceof ListCache$1){var s=n.__data__;if(!Map$2||s.length<LARGE_ARRAY_SIZE$2-1)return s.push([e,r]),this.size=++n.size,this;n=this.__data__=new MapCache$1(s)}return n.set(e,r),this.size=n.size,this}function Stack$1(e){var r=this.__data__=new ListCache$1(e);this.size=r.size}Stack$1.prototype.clear=stackClear$1;Stack$1.prototype.delete=stackDelete$1;Stack$1.prototype.get=stackGet$1;Stack$1.prototype.has=stackHas$1;Stack$1.prototype.set=stackSet$1;function baseAssign(e,r){return e&&copyObject$1(r,keys$1(r),e)}function baseAssignIn(e,r){return e&&copyObject$1(r,keysIn$1(r),e)}var freeExports$3=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$3=freeExports$3&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$3=freeModule$3&&freeModule$3.exports===freeExports$3,Buffer$2=moduleExports$3?root$1.Buffer:void 0,allocUnsafe=Buffer$2?Buffer$2.allocUnsafe:void 0;function cloneBuffer$1(e,r){if(r)return e.slice();var n=e.length,s=allocUnsafe?allocUnsafe(n):new e.constructor(n);return e.copy(s),s}function arrayFilter$1(e,r){for(var n=-1,s=e==null?0:e.length,i=0,c=[];++n<s;){var o=e[n];r(o,n,e)&&(c[i++]=o)}return c}function stubArray$1(){return[]}var objectProto$j=Object.prototype,propertyIsEnumerable$2=objectProto$j.propertyIsEnumerable,nativeGetSymbols$2=Object.getOwnPropertySymbols,getSymbols$1=nativeGetSymbols$2?function(e){return e==null?[]:(e=Object(e),arrayFilter$1(nativeGetSymbols$2(e),function(r){return propertyIsEnumerable$2.call(e,r)}))}:stubArray$1;function copySymbols(e,r){return copyObject$1(e,getSymbols$1(e),r)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(e){for(var r=[];e;)arrayPush$1(r,getSymbols$1(e)),e=getPrototype$1(e);return r}:stubArray$1;function copySymbolsIn(e,r){return copyObject$1(e,getSymbolsIn(e),r)}function baseGetAllKeys$1(e,r,n){var s=r(e);return isArray$2(e)?s:arrayPush$1(s,n(e))}function getAllKeys$1(e){return baseGetAllKeys$1(e,keys$1,getSymbols$1)}function getAllKeysIn(e){return baseGetAllKeys$1(e,keysIn$1,getSymbolsIn)}var DataView$1=getNative$1(root$1,"DataView"),Promise$2=getNative$1(root$1,"Promise"),Set$2=getNative$1(root$1,"Set"),mapTag$9="[object Map]",objectTag$5="[object Object]",promiseTag$1="[object Promise]",setTag$9="[object Set]",weakMapTag$4="[object WeakMap]",dataViewTag$6="[object DataView]",dataViewCtorString$1=toSource$1(DataView$1),mapCtorString$1=toSource$1(Map$2),promiseCtorString$1=toSource$1(Promise$2),setCtorString$1=toSource$1(Set$2),weakMapCtorString$1=toSource$1(WeakMap$2),getTag$1=baseGetTag$1;(DataView$1&&getTag$1(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$6||Map$2&&getTag$1(new Map$2)!=mapTag$9||Promise$2&&getTag$1(Promise$2.resolve())!=promiseTag$1||Set$2&&getTag$1(new Set$2)!=setTag$9||WeakMap$2&&getTag$1(new WeakMap$2)!=weakMapTag$4)&&(getTag$1=function(e){var r=baseGetTag$1(e),n=r==objectTag$5?e.constructor:void 0,s=n?toSource$1(n):"";if(s)switch(s){case dataViewCtorString$1:return dataViewTag$6;case mapCtorString$1:return mapTag$9;case promiseCtorString$1:return promiseTag$1;case setCtorString$1:return setTag$9;case weakMapCtorString$1:return weakMapTag$4}return r});var objectProto$i=Object.prototype,hasOwnProperty$f=objectProto$i.hasOwnProperty;function initCloneArray$1(e){var r=e.length,n=new e.constructor(r);return r&&typeof e[0]=="string"&&hasOwnProperty$f.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Uint8Array$2=root$1.Uint8Array;function cloneArrayBuffer$1(e){var r=new e.constructor(e.byteLength);return new Uint8Array$2(r).set(new Uint8Array$2(e)),r}function cloneDataView$1(e,r){var n=r?cloneArrayBuffer$1(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var reFlags$1=/\w*$/;function cloneRegExp$1(e){var r=new e.constructor(e.source,reFlags$1.exec(e));return r.lastIndex=e.lastIndex,r}var symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$2?symbolProto$2.valueOf:void 0;function cloneSymbol$1(e){return symbolValueOf$1?Object(symbolValueOf$1.call(e)):{}}function cloneTypedArray$1(e,r){var n=r?cloneArrayBuffer$1(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var boolTag$4="[object Boolean]",dateTag$4="[object Date]",mapTag$8="[object Map]",numberTag$4="[object Number]",regexpTag$4="[object RegExp]",setTag$8="[object Set]",stringTag$4="[object String]",symbolTag$4="[object Symbol]",arrayBufferTag$4="[object ArrayBuffer]",dataViewTag$5="[object DataView]",float32Tag$4="[object Float32Array]",float64Tag$4="[object Float64Array]",int8Tag$4="[object Int8Array]",int16Tag$4="[object Int16Array]",int32Tag$4="[object Int32Array]",uint8Tag$4="[object Uint8Array]",uint8ClampedTag$4="[object Uint8ClampedArray]",uint16Tag$4="[object Uint16Array]",uint32Tag$4="[object Uint32Array]";function initCloneByTag$1(e,r,n){var s=e.constructor;switch(r){case arrayBufferTag$4:return cloneArrayBuffer$1(e);case boolTag$4:case dateTag$4:return new s(+e);case dataViewTag$5:return cloneDataView$1(e,n);case float32Tag$4:case float64Tag$4:case int8Tag$4:case int16Tag$4:case int32Tag$4:case uint8Tag$4:case uint8ClampedTag$4:case uint16Tag$4:case uint32Tag$4:return cloneTypedArray$1(e,n);case mapTag$8:return new s;case numberTag$4:case stringTag$4:return new s(e);case regexpTag$4:return cloneRegExp$1(e);case setTag$8:return new s;case symbolTag$4:return cloneSymbol$1(e)}}function initCloneObject$1(e){return typeof e.constructor=="function"&&!isPrototype$1(e)?baseCreate$1(getPrototype$1(e)):{}}var mapTag$7="[object Map]";function baseIsMap$1(e){return isObjectLike$1(e)&&getTag$1(e)==mapTag$7}var nodeIsMap$1=nodeUtil$1&&nodeUtil$1.isMap,isMap$1=nodeIsMap$1?baseUnary$1(nodeIsMap$1):baseIsMap$1,setTag$7="[object Set]";function baseIsSet$1(e){return isObjectLike$1(e)&&getTag$1(e)==setTag$7}var nodeIsSet$1=nodeUtil$1&&nodeUtil$1.isSet,isSet$1=nodeIsSet$1?baseUnary$1(nodeIsSet$1):baseIsSet$1,CLONE_DEEP_FLAG$2=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$3="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$3="[object Error]",funcTag$3="[object Function]",genTag$2="[object GeneratorFunction]",mapTag$6="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$6="[object Set]",stringTag$3="[object String]",symbolTag$3="[object Symbol]",weakMapTag$3="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$3="[object Float32Array]",float64Tag$3="[object Float64Array]",int8Tag$3="[object Int8Array]",int16Tag$3="[object Int16Array]",int32Tag$3="[object Int32Array]",uint8Tag$3="[object Uint8Array]",uint8ClampedTag$3="[object Uint8ClampedArray]",uint16Tag$3="[object Uint16Array]",uint32Tag$3="[object Uint32Array]",cloneableTags$1={};cloneableTags$1[argsTag$3]=cloneableTags$1[arrayTag$2]=cloneableTags$1[arrayBufferTag$3]=cloneableTags$1[dataViewTag$4]=cloneableTags$1[boolTag$3]=cloneableTags$1[dateTag$3]=cloneableTags$1[float32Tag$3]=cloneableTags$1[float64Tag$3]=cloneableTags$1[int8Tag$3]=cloneableTags$1[int16Tag$3]=cloneableTags$1[int32Tag$3]=cloneableTags$1[mapTag$6]=cloneableTags$1[numberTag$3]=cloneableTags$1[objectTag$4]=cloneableTags$1[regexpTag$3]=cloneableTags$1[setTag$6]=cloneableTags$1[stringTag$3]=cloneableTags$1[symbolTag$3]=cloneableTags$1[uint8Tag$3]=cloneableTags$1[uint8ClampedTag$3]=cloneableTags$1[uint16Tag$3]=cloneableTags$1[uint32Tag$3]=!0;cloneableTags$1[errorTag$3]=cloneableTags$1[funcTag$3]=cloneableTags$1[weakMapTag$3]=!1;function baseClone$1(e,r,n,s,i,c){var o,u=r&CLONE_DEEP_FLAG$2,l=r&CLONE_FLAT_FLAG,f=r&CLONE_SYMBOLS_FLAG$2;if(o!==void 0)return o;if(!isObject$4(e))return e;var d=isArray$2(e);if(d){if(o=initCloneArray$1(e),!u)return copyArray(e,o)}else{var h=getTag$1(e),p=h==funcTag$3||h==genTag$2;if(isBuffer$2(e))return cloneBuffer$1(e,u);if(h==objectTag$4||h==argsTag$3||p&&!i){if(o=l||p?{}:initCloneObject$1(e),!u)return l?copySymbolsIn(e,baseAssignIn(o,e)):copySymbols(e,baseAssign(o,e))}else{if(!cloneableTags$1[h])return i?e:{};o=initCloneByTag$1(e,h,u)}}c||(c=new Stack$1);var g=c.get(e);if(g)return g;c.set(e,o),isSet$1(e)?e.forEach(function(w){o.add(baseClone$1(w,r,n,w,e,c))}):isMap$1(e)&&e.forEach(function(w,P){o.set(P,baseClone$1(w,r,n,P,e,c))});var $=f?l?getAllKeysIn:getAllKeys$1:l?keysIn$1:keys$1,b=d?void 0:$(e);return arrayEach$1(b||e,function(w,P){b&&(P=w,w=e[P]),assignValue$1(o,P,baseClone$1(w,r,n,P,e,c))}),o}var CLONE_DEEP_FLAG$1=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep$1(e){return baseClone$1(e,CLONE_DEEP_FLAG$1|CLONE_SYMBOLS_FLAG$1)}function hasPath(e,r,n){r=castPath(r,e);for(var s=-1,i=r.length,c=!1;++s<i;){var o=toKey(r[s]);if(!(c=e!=null&&n(e,o)))break;e=e[o]}return c||++s!=i?c:(i=e==null?0:e.length,!!i&&isLength$1(i)&&isIndex$1(o,i)&&(isArray$2(e)||isArguments$1(e)))}var objectProto$h=Object.prototype,hasOwnProperty$e=objectProto$h.hasOwnProperty;function baseHas(e,r){return e!=null&&hasOwnProperty$e.call(e,r)}function has(e,r){return e!=null&&hasPath(e,r,baseHas)}var mapTag$5="[object Map]",setTag$5="[object Set]",objectProto$g=Object.prototype,hasOwnProperty$d=objectProto$g.hasOwnProperty;function isEmpty(e){if(e==null)return!0;if(isArrayLike$1(e)&&(isArray$2(e)||typeof e=="string"||typeof e.splice=="function"||isBuffer$2(e)||isTypedArray$1(e)||isArguments$1(e)))return!e.length;var r=getTag$1(e);if(r==mapTag$5||r==setTag$5)return!e.size;if(isPrototype$1(e))return!baseKeys$1(e).length;for(var n in e)if(hasOwnProperty$d.call(e,n))return!1;return!0}function baseSet(e,r,n,s){if(!isObject$4(e))return e;r=castPath(r,e);for(var i=-1,c=r.length,o=c-1,u=e;u!=null&&++i<c;){var l=toKey(r[i]),f=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(i!=o){var d=u[l];f=void 0,f===void 0&&(f=isObject$4(d)?d:isIndex$1(r[i+1])?[]:{})}assignValue$1(u,l,f),u=u[l]}return e}function set(e,r,n){return e==null?e:baseSet(e,r,n)}var dayjs_min={exports:{}};(function(e,r){(function(n,s){e.exports=s()})(commonjsGlobal,function(){var n=1e3,s=6e4,i=36e5,c="millisecond",o="second",u="minute",l="hour",f="day",d="week",h="month",p="quarter",g="year",$="date",b="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,P=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,I={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(A){var T=["th","st","nd","rd"],y=A%100;return"["+A+(T[(y-20)%10]||T[y]||T[0])+"]"}},x=function(A,T,y){var S=String(A);return!S||S.length>=T?A:""+Array(T+1-S.length).join(y)+A},_={s:x,z:function(A){var T=-A.utcOffset(),y=Math.abs(T),S=Math.floor(y/60),v=y%60;return(T<=0?"+":"-")+x(S,2,"0")+":"+x(v,2,"0")},m:function A(T,y){if(T.date()<y.date())return-A(y,T);var S=12*(y.year()-T.year())+(y.month()-T.month()),v=T.clone().add(S,h),C=y-v<0,j=T.clone().add(S+(C?-1:1),h);return+(-(S+(y-v)/(C?v-j:j-v))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:h,y:g,w:d,d:f,D:$,h:l,m:u,s:o,ms:c,Q:p}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},F="en",B={};B[F]=I;var Q="$isDayjsObject",J=function(A){return A instanceof W||!(!A||!A[Q])},V=function A(T,y,S){var v;if(!T)return F;if(typeof T=="string"){var C=T.toLowerCase();B[C]&&(v=C),y&&(B[C]=y,v=C);var j=T.split("-");if(!v&&j.length>1)return A(j[0])}else{var M=T.name;B[M]=T,v=M}return!S&&v&&(F=v),v||!S&&F},L=function(A,T){if(J(A))return A.clone();var y=typeof T=="object"?T:{};return y.date=A,y.args=arguments,new W(y)},D=_;D.l=V,D.i=J,D.w=function(A,T){return L(A,{locale:T.$L,utc:T.$u,x:T.$x,$offset:T.$offset})};var W=function(){function A(y){this.$L=V(y.locale,null,!0),this.parse(y),this.$x=this.$x||y.x||{},this[Q]=!0}var T=A.prototype;return T.parse=function(y){this.$d=function(S){var v=S.date,C=S.utc;if(v===null)return new Date(NaN);if(D.u(v))return new Date;if(v instanceof Date)return new Date(v);if(typeof v=="string"&&!/Z$/i.test(v)){var j=v.match(w);if(j){var M=j[2]-1||0,N=(j[7]||"0").substring(0,3);return C?new Date(Date.UTC(j[1],M,j[3]||1,j[4]||0,j[5]||0,j[6]||0,N)):new Date(j[1],M,j[3]||1,j[4]||0,j[5]||0,j[6]||0,N)}}return new Date(v)}(y),this.init()},T.init=function(){var y=this.$d;this.$y=y.getFullYear(),this.$M=y.getMonth(),this.$D=y.getDate(),this.$W=y.getDay(),this.$H=y.getHours(),this.$m=y.getMinutes(),this.$s=y.getSeconds(),this.$ms=y.getMilliseconds()},T.$utils=function(){return D},T.isValid=function(){return this.$d.toString()!==b},T.isSame=function(y,S){var v=L(y);return this.startOf(S)<=v&&v<=this.endOf(S)},T.isAfter=function(y,S){return L(y)<this.startOf(S)},T.isBefore=function(y,S){return this.endOf(S)<L(y)},T.$g=function(y,S,v){return D.u(y)?this[S]:this.set(v,y)},T.unix=function(){return Math.floor(this.valueOf()/1e3)},T.valueOf=function(){return this.$d.getTime()},T.startOf=function(y,S){var v=this,C=!!D.u(S)||S,j=D.p(y),M=function(te,H){var Z=D.w(v.$u?Date.UTC(v.$y,H,te):new Date(v.$y,H,te),v);return C?Z:Z.endOf(f)},N=function(te,H){return D.w(v.toDate()[te].apply(v.toDate("s"),(C?[0,0,0,0]:[23,59,59,999]).slice(H)),v)},U=this.$W,q=this.$M,G=this.$D,ne="set"+(this.$u?"UTC":"");switch(j){case g:return C?M(1,0):M(31,11);case h:return C?M(1,q):M(0,q+1);case d:var ee=this.$locale().weekStart||0,ie=(U<ee?U+7:U)-ee;return M(C?G-ie:G+(6-ie),q);case f:case $:return N(ne+"Hours",0);case l:return N(ne+"Minutes",1);case u:return N(ne+"Seconds",2);case o:return N(ne+"Milliseconds",3);default:return this.clone()}},T.endOf=function(y){return this.startOf(y,!1)},T.$set=function(y,S){var v,C=D.p(y),j="set"+(this.$u?"UTC":""),M=(v={},v[f]=j+"Date",v[$]=j+"Date",v[h]=j+"Month",v[g]=j+"FullYear",v[l]=j+"Hours",v[u]=j+"Minutes",v[o]=j+"Seconds",v[c]=j+"Milliseconds",v)[C],N=C===f?this.$D+(S-this.$W):S;if(C===h||C===g){var U=this.clone().set($,1);U.$d[M](N),U.init(),this.$d=U.set($,Math.min(this.$D,U.daysInMonth())).$d}else M&&this.$d[M](N);return this.init(),this},T.set=function(y,S){return this.clone().$set(y,S)},T.get=function(y){return this[D.p(y)]()},T.add=function(y,S){var v,C=this;y=Number(y);var j=D.p(S),M=function(q){var G=L(C);return D.w(G.date(G.date()+Math.round(q*y)),C)};if(j===h)return this.set(h,this.$M+y);if(j===g)return this.set(g,this.$y+y);if(j===f)return M(1);if(j===d)return M(7);var N=(v={},v[u]=s,v[l]=i,v[o]=n,v)[j]||1,U=this.$d.getTime()+y*N;return D.w(U,this)},T.subtract=function(y,S){return this.add(-1*y,S)},T.format=function(y){var S=this,v=this.$locale();if(!this.isValid())return v.invalidDate||b;var C=y||"YYYY-MM-DDTHH:mm:ssZ",j=D.z(this),M=this.$H,N=this.$m,U=this.$M,q=v.weekdays,G=v.months,ne=v.meridiem,ee=function(H,Z,ae,he){return H&&(H[Z]||H(S,C))||ae[Z].slice(0,he)},ie=function(H){return D.s(M%12||12,H,"0")},te=ne||function(H,Z,ae){var he=H<12?"AM":"PM";return ae?he.toLowerCase():he};return C.replace(P,function(H,Z){return Z||function(ae){switch(ae){case"YY":return String(S.$y).slice(-2);case"YYYY":return D.s(S.$y,4,"0");case"M":return U+1;case"MM":return D.s(U+1,2,"0");case"MMM":return ee(v.monthsShort,U,G,3);case"MMMM":return ee(G,U);case"D":return S.$D;case"DD":return D.s(S.$D,2,"0");case"d":return String(S.$W);case"dd":return ee(v.weekdaysMin,S.$W,q,2);case"ddd":return ee(v.weekdaysShort,S.$W,q,3);case"dddd":return q[S.$W];case"H":return String(M);case"HH":return D.s(M,2,"0");case"h":return ie(1);case"hh":return ie(2);case"a":return te(M,N,!0);case"A":return te(M,N,!1);case"m":return String(N);case"mm":return D.s(N,2,"0");case"s":return String(S.$s);case"ss":return D.s(S.$s,2,"0");case"SSS":return D.s(S.$ms,3,"0");case"Z":return j}return null}(H)||j.replace(":","")})},T.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},T.diff=function(y,S,v){var C,j=this,M=D.p(S),N=L(y),U=(N.utcOffset()-this.utcOffset())*s,q=this-N,G=function(){return D.m(j,N)};switch(M){case g:C=G()/12;break;case h:C=G();break;case p:C=G()/3;break;case d:C=(q-U)/6048e5;break;case f:C=(q-U)/864e5;break;case l:C=q/i;break;case u:C=q/s;break;case o:C=q/n;break;default:C=q}return v?C:D.a(C)},T.daysInMonth=function(){return this.endOf(h).$D},T.$locale=function(){return B[this.$L]},T.locale=function(y,S){if(!y)return this.$L;var v=this.clone(),C=V(y,S,!0);return C&&(v.$L=C),v},T.clone=function(){return D.w(this.$d,this)},T.toDate=function(){return new Date(this.valueOf())},T.toJSON=function(){return this.isValid()?this.toISOString():null},T.toISOString=function(){return this.$d.toISOString()},T.toString=function(){return this.$d.toUTCString()},A}(),de=W.prototype;return L.prototype=de,[["$ms",c],["$s",o],["$m",u],["$H",l],["$W",f],["$M",h],["$y",g],["$D",$]].forEach(function(A){de[A[1]]=function(T){return this.$g(T,A[0],A[1])}}),L.extend=function(A,T){return A.$i||(A(T,W,L),A.$i=!0),L},L.locale=V,L.isDayjs=J,L.unix=function(A){return L(1e3*A)},L.en=B[F],L.Ls=B,L.p={},L})})(dayjs_min);var utc={exports:{}};(function(e,r){(function(n,s){e.exports=s()})(commonjsGlobal,function(){var n="minute",s=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(c,o,u){var l=o.prototype;u.utc=function(b){var w={date:b,utc:!0,args:arguments};return new o(w)},l.utc=function(b){var w=u(this.toDate(),{locale:this.$L,utc:!0});return b?w.add(this.utcOffset(),n):w},l.local=function(){return u(this.toDate(),{locale:this.$L,utc:!1})};var f=l.parse;l.parse=function(b){b.utc&&(this.$u=!0),this.$utils().u(b.$offset)||(this.$offset=b.$offset),f.call(this,b)};var d=l.init;l.init=function(){if(this.$u){var b=this.$d;this.$y=b.getUTCFullYear(),this.$M=b.getUTCMonth(),this.$D=b.getUTCDate(),this.$W=b.getUTCDay(),this.$H=b.getUTCHours(),this.$m=b.getUTCMinutes(),this.$s=b.getUTCSeconds(),this.$ms=b.getUTCMilliseconds()}else d.call(this)};var h=l.utcOffset;l.utcOffset=function(b,w){var P=this.$utils().u;if(P(b))return this.$u?0:P(this.$offset)?h.call(this):this.$offset;if(typeof b=="string"&&(b=function(F){F===void 0&&(F="");var B=F.match(s);if(!B)return null;var Q=(""+B[0]).match(i)||["-",0,0],J=Q[0],V=60*+Q[1]+ +Q[2];return V===0?0:J==="+"?V:-V}(b),b===null))return this;var I=Math.abs(b)<=16?60*b:b,x=this;if(w)return x.$offset=I,x.$u=b===0,x;if(b!==0){var _=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(x=this.local().add(I+_,n)).$offset=I,x.$x.$localOffset=_}else x=this.utc();return x};var p=l.format;l.format=function(b){var w=b||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return p.call(this,w)},l.valueOf=function(){var b=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*b},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var g=l.toDate;l.toDate=function(b){return b==="s"&&this.$offset?u(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():g.call(this)};var $=l.diff;l.diff=function(b,w,P){if(b&&this.$u===b.$u)return $.call(this,b,w,P);var I=this.local(),x=u(b).local();return $.call(I,x,w,P)}}})})(utc);var a=(e=>(e.CONTAINER="container",e.PAGE="page",e.ROOT="app",e.PAGE_FRAGMENT="page-fragment",e))(a||{}),E=(e=>(e.COMP="comp",e.CODE="code",e.DATA_SOURCE="data-source",e))(E||{}),O=(e=>(e.CODE="code",e))(O||{}),t=(e=>(e.CODE="code",e.DATA_SOURCE_METHOD="data-source-method",e))(t||{});const getNodePath=(e,r=[])=>{const n=[],s=function(i,c){if(!Array.isArray(c))return null;for(let o=0,u=c.length;o<u;o++){const l=c[o];if(n.push(l),"".concat(l.id)==="".concat(i))return l;if(l.items){const f=s(i,l.items);if(f)return f}n.pop()}return null};return s(e,r),n},filterXSS=e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),getUrlParam=(e,r)=>{const n=location.href,s=new RegExp("[?&#]".concat(e,"=([^&#]+)"),"gi"),i=n.match(s);let c;return i&&i.length>0?(c=i[i.length-1].split("="),c&&c.length>1?filterXSS(c[1]):""):""},isObject$3=e=>Object.prototype.toString.call(e)==="[object Object]",isPage=e=>{var r;return e?((r=e.type)==null?void 0:r.toLowerCase())===a.PAGE:!1},isPageFragment=e=>{var r;return e?((r=e.type)==null?void 0:r.toLowerCase())===a.PAGE_FRAGMENT:!1},getValueByKeyPath=(e="",r={})=>(Array.isArray(e)?e:"".concat(e).replaceAll(/\[(\d+)\]/g,".$1").split(".")).reduce((s,i)=>{if(isObject$3(s)||Array.isArray(s))return s[i]},r),setValueByKeyPath=(e,r,n={})=>set(n,e,r),getNodes=(e,r=[])=>{const n=[],s=function(i,c){if(Array.isArray(c))for(let o=0,u=c.length;o<u;o++){const l=c[o],f=i.findIndex(d=>"".concat(d)==="".concat(l.id));f>-1&&(i.slice(f,1),n.push(l)),l.items&&s(i,l.items)}};return s(e,r),n},getDepKeys=(e={},r)=>Array.from(Object.values(e).reduce((n,s)=>{var i;return(((i=s[r])==null?void 0:i.keys)||[]).forEach(c=>n.add(c)),n},new Set)),getDepNodeIds=(e={})=>Array.from(Object.values(e).reduce((r,n)=>(Object.keys(n).forEach(s=>{r.add(s)}),r),new Set)),replaceChildNode=(e,r,n)=>{var u;const s=getNodePath(e.id,r),i=s.pop();let c=s.pop();if(!i)throw new Error("未找到目标节点");if(!c)throw new Error("未找到父节点");const o=(u=c.items)==null?void 0:u.findIndex(l=>l.id===i.id);c.items.splice(o,1,e)},DSL_NODE_KEY_COPY_PREFIX="__tmagic__",compiledNode=(e,r,n={},s)=>{let i=[];if(!s)i=getDepKeys(n,r.id);else{const c=n[s];i=(c==null?void 0:c[r.id].keys)||[]}return i.forEach(c=>{const o="".concat(c).replaceAll(/\[(\d+)\]/g,".$1").split("."),u=o.map((h,p)=>p<o.length-1?h:"".concat(DSL_NODE_KEY_COPY_PREFIX).concat(h)),l=getValueByKeyPath(c,r);let f=getValueByKeyPath(u,r);typeof f>"u"&&(setValueByKeyPath(u.join("."),l,r),f=l);let d;try{d=e(f)}catch(h){console.error(h),d=""}setValueByKeyPath(c,d,r)}),r},compiledCond=(e,r,n,s=[])=>{var i,c;switch(typeof r=="string"&&typeof n>"u"&&(n=""),e){case"is":return r===n;case"not":return r!==n;case"=":return r===n;case"!=":return r!==n;case">":return r>n;case">=":return r>=n;case"<":return r<n;case"<=":return r<=n;case"between":return s.length>1&&r>=s[0]&&r<=s[1];case"not_between":return s.length<2||r<s[0]||r>s[1];case"include":return(i=r==null?void 0:r.includes)==null?void 0:i.call(r,n);case"not_include":return typeof r>"u"||!((c=r.includes)!=null&&c.call(r,n))}return!1},getDefaultValueFromFields=e=>{const r={},n={string:void 0,object:{},array:[],boolean:void 0,number:void 0,null:null,any:void 0};return e.forEach(s=>{if(typeof s.defaultValue<"u"){if(s.type==="array"&&!Array.isArray(s.defaultValue)){r[s.name]=n.array;return}if(s.type==="object"&&!isObject$3(s.defaultValue)){if(typeof s.defaultValue=="string"){try{r[s.name]=JSON.parse(s.defaultValue)}catch(i){r[s.name]=n.object}return}r[s.name]=n.object;return}r[s.name]=cloneDeep$1(s.defaultValue);return}if(s.type==="object"){r[s.name]=s.fields?getDefaultValueFromFields(s.fields):n.object;return}if(s.type){r[s.name]=n[s.type];return}r[s.name]=void 0}),r},DATA_SOURCE_FIELDS_SELECT_VALUE_PREFIX="ds-field::",DATA_SOURCE_FIELDS_CHANGE_EVENT_PREFIX="ds-field-changed",addParamToUrl=(e,r=globalThis,n=!0)=>{const s=new URL(r.location.href),{searchParams:i}=s;for(const[o,u]of Object.entries(e))i.set(o,u);const c=s.toString();n?r.location.href=c:r.history.pushState({},"",s)};var DepTargetType=(e=>(e.DEFAULT="default",e.CODE_BLOCK="code-block",e.DATA_SOURCE="data-source",e.DATA_SOURCE_METHOD="data-source-method",e.DATA_SOURCE_COND="data-source-cond",e))(DepTargetType||{});class Target{constructor(r){m(this,"isTarget");m(this,"id");m(this,"name");m(this,"type",DepTargetType.DEFAULT);m(this,"deps",{});m(this,"isCollectByDefault");var n;this.isTarget=r.isTarget,this.id=r.id,this.name=r.name,this.isCollectByDefault=(n=r.isCollectByDefault)!=null?n:!0,r.type&&(this.type=r.type),r.initialDeps&&(this.deps=r.initialDeps)}updateDep({id:r,name:n,key:s,data:i}){const c=this.deps[r]||{name:n,keys:[]};c.name=n,c.data=i,this.deps[r]=c,c.keys.indexOf(s)===-1&&c.keys.push(s)}removeDep(r,n){if(typeof r>"u"){Object.keys(this.deps).forEach(i=>{delete this.deps[i]});return}const s=this.deps[r];if(s)if(n){const i=s.keys.indexOf(n);s.keys.splice(i,1),s.keys.length===0&&delete this.deps[r]}else delete this.deps[r]}hasDep(r,n){const s=this.deps[r];return!!(s!=null&&s.keys.find(i=>i===n))}destroy(){this.deps={}}}const isDataSourceTemplate=(e,r)=>typeof e=="string"&&e.includes("".concat(r))&&/\$\{([\s\S]+?)\}/.test(e),isUseDataSourceField=(e,r)=>{if(!Array.isArray(e)||typeof e[0]!="string")return!1;const[n]=e,s=n.indexOf(DATA_SOURCE_FIELDS_SELECT_VALUE_PREFIX);return s===-1?!1:n.substring(s+DATA_SOURCE_FIELDS_SELECT_VALUE_PREFIX.length)===r},traverseTarget=(e,r,n)=>{Object.values(e).forEach(s=>{Object.values(s).forEach(i=>{n&&i.type!==n||r(i)})})};class Watcher{constructor(r){m(this,"targetsList",{});m(this,"childrenProp","items");m(this,"idProp","id");m(this,"nameProp","name");r!=null&&r.initialTargets&&(this.targetsList=r.initialTargets),r!=null&&r.childrenProp&&(this.childrenProp=r.childrenProp)}getTargetsList(){return this.targetsList}getTargets(r=DepTargetType.DEFAULT){return this.targetsList[r]||{}}addTarget(r){const n=this.getTargets(r.type)||{};this.targetsList[r.type]=n,n[r.id]=r}getTarget(r,n=DepTargetType.DEFAULT){return this.getTargets(n)[r]}hasTarget(r,n=DepTargetType.DEFAULT){return!!this.getTarget(r,n)}hasSpecifiedTypeTarget(r=DepTargetType.DEFAULT){return Object.keys(this.getTargets(r)).length>0}removeTarget(r,n=DepTargetType.DEFAULT){const s=this.getTargets(n);s[r]&&(s[r].destroy(),delete s[r])}removeTargets(r=DepTargetType.DEFAULT){const n=this.targetsList[r];if(n){for(const s of Object.values(n))s.destroy();delete this.targetsList[r]}}clearTargets(){Object.keys(this.targetsList).forEach(r=>{delete this.targetsList[r]})}collect(r,n={},s=!1,i){this.collectByCallback(r,i,({node:c,target:o})=>{this.removeTargetDep(o,c),this.collectItem(c,o,n,s)})}collectByCallback(r,n,s){traverseTarget(this.targetsList,i=>{!n&&!i.isCollectByDefault||r.forEach(c=>{s({node:c,target:i})})},n)}clear(r,n){let{targetsList:s}=this;n&&(s={[n]:this.getTargets(n)});const i=[];traverseTarget(s,c=>{r?r.forEach(o=>{c.removeDep(o[this.idProp]),Array.isArray(o[this.childrenProp])&&o[this.childrenProp].length&&!i.includes(o[this.idProp])&&(i.push(o[this.idProp]),this.clear(o[this.childrenProp]))}):c.removeDep()})}clearByType(r,n){this.clear(n,r)}collectItem(r,n,s={},i=!1){const c=(o,u="")=>{const l=(f,d)=>{const h=f===this.childrenProp,p=u?"".concat(u,".").concat(f):f;n.isTarget(p,d)?n.updateDep({id:r[this.idProp],name:"".concat(r[this.nameProp]||r[this.idProp]),data:s,key:p}):!h&&Array.isArray(d)?d.forEach((g,$)=>{isObject$3(g)&&c(g,"".concat(p,"[").concat($,"]"))}):isObject$3(d)&&c(d,p),h&&i&&Array.isArray(d)&&d.forEach(g=>{this.collectItem(g,n,s,i)})};Object.entries(o).forEach(([f,d])=>{typeof d>"u"||d===""||l(f,d)})};c(r)}removeTargetDep(r,n,s){r.removeDep(n[this.idProp],s),typeof s>"u"&&Array.isArray(n[this.childrenProp])&&n[this.childrenProp].length&&n[this.childrenProp].forEach(i=>{this.removeTargetDep(r,i,s)})}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __awaiter(e,r,n,s){function i(c){return c instanceof n?c:new n(function(o){o(c)})}return new(n||(n=Promise))(function(c,o){function u(d){try{f(s.next(d))}catch(h){o(h)}}function l(d){try{f(s.throw(d))}catch(h){o(h)}}function f(d){d.done?c(d.value):i(d.value).then(u,l)}f((s=s.apply(e,[])).next())})}const segments=[];function Match(e,r,n="*"){if(e===n)return!0;segments.length=0;let s=0,i=0,c=0,o=0;for(let p=0,g=e.length;p<g;p+=1){const $=e[p];$===n&&(s+=1,p>o&&segments.push(e.substring(o,p)),segments.push($),o=p+1)}if(o<e.length&&segments.push(e.substring(o)),s?(i=e.length-s,c=1/0):c=i=e.length,segments.length===0)return e===r;const u=r.length;if(u<i||u>c)return!1;let l=0,f=segments.length-1,d=r.length-1,h=!1;for(;;){const p=segments[f];if(f-=1,p===n)h=!0;else{const g=d+1-p.length,$=r.lastIndexOf(p,g);if($===-1||$>g)return!1;if(h)d=$-1,h=!1;else{if($!==g)return!1;d-=p.length}}if(l>f)break}return!0}class WildcardObject{constructor(r,n,s,i=void 0){this.obj=r,this.delimiter=n,this.wildcard=s,this.is_match=i}shortMatch(r,n){if(r===n||r===this.wildcard)return!0;if(this.is_match)return this.is_match(r,n);const s=r.indexOf(this.wildcard);if(s>-1){const i=r.substr(s+1);if(s===0||n.substring(0,s)===r.substring(0,s)){const c=i.length;return c>0?n.substr(-c)===i:!0}}return!1}match(r,n){return this.is_match?this.is_match(r,n):r===n||r===this.wildcard||n===this.wildcard||this.shortMatch(r,n)||Match(r,n,this.wildcard)}handleArray(r,n,s,i,c={}){let o=r.indexOf(this.delimiter,s),u=!1;o===-1&&(u=!0,o=r.length);const l=r.substring(s,o);let f=0;for(const d of n){const h=f.toString(),p=i===""?h:i+this.delimiter+f;(l===this.wildcard||l===h||this.shortMatch(l,h))&&(u?c[p]=d:this.goFurther(r,d,o+1,p,c)),f++}return c}handleObject(r,n,s,i,c={}){let o=r.indexOf(this.delimiter,s),u=!1;o===-1&&(u=!0,o=r.length);const l=r.substring(s,o);for(let f in n){f=f.toString();const d=i===""?f:i+this.delimiter+f;(l===this.wildcard||l===f||this.shortMatch(l,f))&&(u?c[d]=n[f]:this.goFurther(r,n[f],o+1,d,c))}return c}goFurther(r,n,s,i,c={}){return Array.isArray(n)?this.handleArray(r,n,s,i,c):this.handleObject(r,n,s,i,c)}get(r){return this.goFurther(r,this.obj,0,"")}}class ObjectPath{static get(r,n,s=!1){if(!n)return;let i=n;for(const c of r)if(c in i)i=i[c];else if(s)i[c]=Object.create({}),i=i[c];else return;return i}static set(r,n,s){if(!s)return;if(r.length===0){for(const u in s)delete s[u];for(const u in n)s[u]=n[u];return}const i=r.slice(),c=i.pop(),o=ObjectPath.get(i,s,!0);return typeof o=="object"&&(o[c]=n),n}}let wasm,WASM_VECTOR_LEN=0,cachegetUint8Memory0=null;function getUint8Memory0(){return(cachegetUint8Memory0===null||cachegetUint8Memory0.buffer!==wasm.memory.buffer)&&(cachegetUint8Memory0=new Uint8Array(wasm.memory.buffer)),cachegetUint8Memory0}let cachedTextEncoder=new TextEncoder("utf-8");const encodeString=typeof cachedTextEncoder.encodeInto=="function"?function(e,r){return cachedTextEncoder.encodeInto(e,r)}:function(e,r){const n=cachedTextEncoder.encode(e);return r.set(n),{read:e.length,written:n.length}};function passStringToWasm0(e,r,n){if(n===void 0){const u=cachedTextEncoder.encode(e),l=r(u.length);return getUint8Memory0().subarray(l,l+u.length).set(u),WASM_VECTOR_LEN=u.length,l}let s=e.length,i=r(s);const c=getUint8Memory0();let o=0;for(;o<s;o++){const u=e.charCodeAt(o);if(u>127)break;c[i+o]=u}if(o!==s){o!==0&&(e=e.slice(o)),i=n(i,s,s=o+e.length*3);const u=getUint8Memory0().subarray(i+o,i+s),l=encodeString(e,u);o+=l.written}return WASM_VECTOR_LEN=o,i}function is_match(e,r){var n=passStringToWasm0(e,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),s=WASM_VECTOR_LEN,i=passStringToWasm0(r,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),c=WASM_VECTOR_LEN,o=wasm.is_match(n,s,i,c);return o!==0}async function load(e,r){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,r)}catch(s){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",s);else throw s}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,r)}else{const n=await WebAssembly.instantiate(e,r);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}async function init(e){const r={};(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:s}=await load(await e,r);return wasm=n.exports,init.__wbindgen_wasm_module=s,wasm}const defaultUpdateOptions={only:[],source:"",debug:!1,data:void 0,queue:!1,force:!1};function log(e,r){console.debug(e,r)}function getDefaultOptions(){return{delimiter:".",debug:!1,extraDebug:!1,useMute:!0,notRecursive:";",param:":",wildcard:"*",experimentalMatch:!1,queue:!1,defaultBulkValue:!0,useCache:!1,useSplitCache:!1,useIndicesCache:!1,maxSimultaneousJobs:1e3,maxQueueRuns:1e3,log,Promise}}function isObject$2(e){return e&&e.constructor?e.constructor.name==="Object":typeof e=="object"&&e!==null}class DeepState{constructor(r={},n={}){this.jobsRunning=0,this.updateQueue=[],this.subscribeQueue=[],this.listenersIgnoreCache=new WeakMap,this.is_match=null,this.destroyed=!1,this.queueRuns=0,this.groupId=0,this.namedGroups=[],this.numberGroups=[],this.traceId=0,this.traceMap=new Map,this.tracing=[],this.savedTrace=[],this.collection=null,this.collections=0,this.cache=new Map,this.splitCache=new Map,this.indices=new Map,this.indicesCount=new Map,this.lastExecs=new WeakMap,this.listeners=new Map,this.waitingListeners=new Map,this.options=Object.assign(Object.assign({},getDefaultOptions()),n),this.data=r,this.id=0,this.options.useCache?(this.pathGet=this.cacheGet,this.pathSet=this.cacheSet):(this.pathGet=ObjectPath.get,this.pathSet=ObjectPath.set),n.Promise?this.resolved=n.Promise.resolve():this.resolved=Promise.resolve(),this.muted=new Set,this.mutedListeners=new Set,this.scan=new WildcardObject(this.data,this.options.delimiter,this.options.wildcard),this.destroyed=!1}getDefaultListenerOptions(){return{bulk:!1,bulkValue:this.options.defaultBulkValue,debug:!1,source:"",data:void 0,queue:!1,group:!1}}cacheGet(r,n=this.data,s=!1){const i=r.join(this.options.delimiter),c=this.cache.get(i);if(c){const u=c.deref();if(u)return u}const o=ObjectPath.get(r,n,s);return(isObject$2(o)||Array.isArray(o))&&this.cache.set(i,new WeakRef(o)),o}cacheSet(r,n,s=this.data){const i=r.join(this.options.delimiter);return isObject$2(n)||Array.isArray(n)?this.cache.set(i,new WeakRef(n)):this.cache.delete(i),ObjectPath.set(r,n,s)}silentSet(r,n){return this.pathSet(this.split(r),n,this.data)}loadWasmMatcher(r){return __awaiter(this,void 0,void 0,function*(){yield init(r),this.is_match=is_match,this.scan=new WildcardObject(this.data,this.options.delimiter,this.options.wildcard,this.is_match)})}same(r,n){return(["number","string","undefined","boolean"].includes(typeof r)||r===null)&&n===r}getListeners(){return this.listeners}destroy(){this.destroyed=!0,this.data=void 0,this.listeners=new Map,this.waitingListeners=new Map,this.updateQueue=[],this.jobsRunning=0}match(r,n,s=!0){return this.is_match?this.is_match(r,n):r===n||r===this.options.wildcard||n===this.options.wildcard?!0:!s&&this.getIndicesCount(this.options.delimiter,r)<this.getIndicesCount(this.options.delimiter,n)?!1:this.scan.match(r,n)}getIndicesOf(r,n){if(this.options.useIndicesCache&&this.indices.has(n))return this.indices.get(n);const s=r.length;if(s==0)return[];let i=0,c,o=[];for(;(c=n.indexOf(r,i))>-1;)o.push(c),i=c+s;return this.options.useIndicesCache&&this.indices.set(n,o),o}getIndicesCount(r,n){if(this.options.useIndicesCache&&this.indicesCount.has(n))return this.indicesCount.get(n);const s=r.length;if(s==0)return 0;let i=0,c,o=0;for(;(c=n.indexOf(r,i))>-1;)o++,i=c+s;return this.options.useIndicesCache&&this.indicesCount.set(n,o),o}cutPath(r,n){if(n==="")return"";if(r=this.cleanNotRecursivePath(r),n=this.cleanNotRecursivePath(n),r===n)return r;const s=this.getIndicesCount(this.options.delimiter,n),i=this.getIndicesOf(this.options.delimiter,r);return r.substring(0,i[s])}trimPath(r){return r=this.cleanNotRecursivePath(r),r.charAt(0)===this.options.delimiter?r.substr(1):r}split(r){if(r==="")return[];if(!this.options.useSplitCache)return r.split(this.options.delimiter);const n=this.splitCache.get(r);if(n)return n.slice();const s=r.split(this.options.delimiter);return this.splitCache.set(r,s.slice()),s}isWildcard(r){return r.includes(this.options.wildcard)||this.hasParams(r)}isNotRecursive(r){return r.endsWith(this.options.notRecursive)}cleanNotRecursivePath(r){return this.isNotRecursive(r)?r.substring(0,r.length-1):r}hasParams(r){return r.includes(this.options.param)}getParamsInfo(r){let n={replaced:"",original:r,params:{}},s=0,i=[];for(const c of this.split(r)){n.params[s]={original:c,replaced:"",name:""};const o=new RegExp("\\".concat(this.options.param,"([^\\").concat(this.options.delimiter,"\\").concat(this.options.param,"]+)"),"g");let u=o.exec(c);if(u)n.params[s].name=u[1];else{delete n.params[s],i.push(c),s++;continue}o.lastIndex=0,n.params[s].replaced=c.replace(o,this.options.wildcard),i.push(n.params[s].replaced),s++}return n.replaced=i.join(this.options.delimiter),n}getParams(r,n){if(!r)return;const s=this.split(n),i={};for(const c in r.params){const o=r.params[c];i[o.name]=s[c]}return i}waitForAll(r,n){const s={};for(let i of r)s[i]={dirty:!1},this.hasParams(i)&&(s[i].paramsInfo=this.getParamsInfo(i)),s[i].isWildcard=this.isWildcard(i),s[i].isRecursive=!this.isNotRecursive(i);return this.waitingListeners.set(r,{fn:n,paths:s}),n(s),function(){this.waitingListeners.delete(r)}}executeWaitingListeners(r){if(!this.destroyed)for(const n of this.waitingListeners.values()){const{fn:s,paths:i}=n;let c=0,o=0;for(let u in i){const l=i[u];let f=!1;l.isRecursive&&(r=this.cutPath(r,u)),l.isWildcard&&this.match(u,r)&&(f=!0),r===u&&(f=!0),f&&(l.dirty=!0),l.dirty&&c++,o++}c===o&&s(i)}}subscribeAll(r,n,s=this.getDefaultListenerOptions()){if(this.destroyed)return()=>{};let i=[],c=0,o=null;typeof s.group=="boolean"&&s.group?(this.groupId++,o=this.groupId,s.bulk=!0):typeof s.group=="string"&&(s.bulk=!0,o=s.group);for(const u of r)i.push(this.subscribe(u,n,s,{all:r,index:c,groupId:o})),c++;return function(){for(const l of i)l()}}getCleanListenersCollection(r={}){return Object.assign({listeners:new Map,isRecursive:!1,isWildcard:!1,hasParams:!1,match:void 0,paramsInfo:void 0,path:void 0,originalPath:void 0,count:0},r)}getCleanListener(r,n=this.getDefaultListenerOptions()){return{fn:r,options:Object.assign(Object.assign({},this.getDefaultListenerOptions()),n),groupId:null}}getListenerCollectionMatch(r,n,s){r=this.cleanNotRecursivePath(r);const i=this;return function(o,u=!1){let l=r;return n?o=i.cutPath(o,r):l=i.cutPath(i.cleanNotRecursivePath(r),o),u&&console.log("[getListenerCollectionMatch]",{listenerPath:r,scopedListenerPath:l,path:o,isRecursive:n,isWildcard:s}),s&&i.match(l,o,n)?!0:l===o}}getListenersCollection(r,n){if(this.listeners.has(r)){let u=this.listeners.get(r);return u.listeners.set(++this.id,n),n.id=this.id,u}const s=this.hasParams(r);let i;s&&(i=this.getParamsInfo(r));let c={isRecursive:!this.isNotRecursive(r),isWildcard:this.isWildcard(r),hasParams:s,paramsInfo:i,originalPath:r,path:s?i.replaced:r};c.isRecursive||(c.path=this.cleanNotRecursivePath(c.path));let o=this.getCleanListenersCollection(Object.assign(Object.assign({},c),{match:this.getListenerCollectionMatch(c.path,c.isRecursive,c.isWildcard)}));return this.id++,o.listeners.set(this.id,n),n.id=this.id,this.listeners.set(c.originalPath,o),o}subscribe(r,n,s=this.getDefaultListenerOptions(),i={all:[r],index:0,groupId:null}){if(this.destroyed)return()=>{};this.jobsRunning++;const c="subscribe";let o=this.getCleanListener(n,s);s.group&&(s.bulk=!0,typeof s.group=="string"?o.groupId=s.group:i.groupId&&(o.groupId=i.groupId)),this.listenersIgnoreCache.set(o,{truthy:[],falsy:[]});const u=this.getListenersCollection(r,o);s.debug&&console.log("[subscribe]",{listenerPath:r,options:s}),u.count++;let l=!0;if(o.groupId&&(typeof o.groupId=="string"?this.namedGroups.includes(o.groupId)?l=!1:this.namedGroups.push(o.groupId):typeof o.groupId=="number"&&(this.numberGroups.includes(o.groupId)?l=!1:this.numberGroups.push(o.groupId))),l){const f=this.cleanNotRecursivePath(u.path),d=this.split(f);if(!u.isWildcard)!this.isMuted(f)&&!this.isMuted(n)&&n(this.pathGet(d,this.data),{type:c,listener:o,listenersCollection:u,path:{listener:r,update:void 0,resolved:this.cleanNotRecursivePath(r)},params:this.getParams(u.paramsInfo,f),options:s});else{const h=this.scan.get(f);if(s.bulk){const p=[];for(const g in h)this.isMuted(g)||p.push({path:g,params:this.getParams(u.paramsInfo,g),value:h[g]});this.isMuted(n)||n(p,{type:c,listener:o,listenersCollection:u,path:{listener:r,update:void 0,resolved:void 0},options:s,params:void 0})}else for(const p in h)!this.isMuted(p)&&!this.isMuted(n)&&n(h[p],{type:c,listener:o,listenersCollection:u,path:{listener:r,update:void 0,resolved:this.cleanNotRecursivePath(p)},params:this.getParams(u.paramsInfo,p),options:s})}}return this.debugSubscribe(o,u,r),this.jobsRunning--,this.unsubscribe(r,this.id)}unsubscribe(r,n){const s=this.listeners,i=s.get(r);return function(){i.listeners.delete(n),i.count--,i.count===0&&s.delete(r)}}runQueuedListeners(){if(!this.destroyed&&this.subscribeQueue.length!==0)if(this.jobsRunning===0){this.queueRuns=0;const r=[...this.subscribeQueue];for(let n=0,s=r.length;n<s;n++)r[n]();this.subscribeQueue.length=0}else{if(this.queueRuns++,this.queueRuns>=this.options.maxQueueRuns)throw this.queueRuns=0,new Error("Maximal number of queue runs exhausted.");Promise.resolve().then(()=>this.runQueuedListeners()).catch(r=>{throw r})}}getQueueNotifyListeners(r,n=[]){for(const s in r){if(this.isMuted(s))continue;let{single:i,bulk:c}=r[s];for(const o of i){let u=!1,l=o.listener.id+":"+o.eventInfo.path.resolved;o.eventInfo.path.resolved||(l=o.listener.id+":"+o.eventInfo.path.listener);for(const d of n)if(l===d.resolvedIdPath){u=!0;break}if(u)continue;const f=this.debugTime(o);if(!this.isMuted(o.listener.fn))if(o.listener.options.queue&&this.jobsRunning)this.subscribeQueue.push(()=>{o.listener.fn(o.value?o.value():void 0,o.eventInfo)});else{let d=o.listener.id+":"+o.eventInfo.path.resolved;o.eventInfo.path.resolved||(d=o.listener.id+":"+o.eventInfo.path.listener),n.push({id:o.listener.id,resolvedPath:o.eventInfo.path.resolved,resolvedIdPath:d,originalFn:o.listener.fn,fn:()=>{o.listener.fn(o.value?o.value():void 0,o.eventInfo)},options:o.listener.options,groupId:o.listener.groupId})}this.debugListener(f,o)}for(const o of c){let u=!1;for(const d of n)if(d.id===o.listener.id){u=!0;break}if(u)continue;const l=this.debugTime(o),f=[];for(const d of o.value)f.push(Object.assign(Object.assign({},d),{value:d.value?d.value():void 0}));if(!this.isMuted(o.listener.fn))if(o.listener.options.queue&&this.jobsRunning)this.subscribeQueue.push(()=>this.jobsRunning?!1:(o.listener.fn(f,o.eventInfo),!0));else{let d=o.listener.id+":"+o.eventInfo.path.resolved;o.eventInfo.path.resolved||(d=o.listener.id+":"+o.eventInfo.path.listener),n.push({id:o.listener.id,resolvedPath:o.eventInfo.path.resolved,resolvedIdPath:d,originalFn:o.listener.fn,fn:()=>{o.listener.fn(f,o.eventInfo)},options:o.listener.options,groupId:o.listener.groupId})}this.debugListener(l,o)}}return Promise.resolve().then(()=>this.runQueuedListeners()),n}shouldIgnore(r,n){if(!r.options.ignore)return!1;for(const s of r.options.ignore){if(n.startsWith(s)||this.is_match&&this.is_match(s,n))return!0;{const i=this.cutPath(n,s);if(this.match(s,i))return!0}}return!1}getSubscribedListeners(r,n,s,i="update",c=null){s=Object.assign(Object.assign({},defaultUpdateOptions),s);const o={};for(let[u,l]of this.listeners)if(l.match(r)){o[u]={single:[],bulk:[],bulkData:[]};const f=l.paramsInfo?this.getParams(l.paramsInfo,r):void 0,d=this.cutPath(r,u),p=l.isRecursive||l.isWildcard?()=>this.get(d):()=>n,g=[{value:p,path:r,params:f}];for(const $ of l.listeners.values()){if(this.shouldIgnore($,r)){$.options.debug&&console.log("[getSubscribedListeners] Listener was not fired because it was ignored.",{listener:$,listenersCollection:l});continue}$.options.bulk?o[u].bulk.push({listener:$,listenersCollection:l,eventInfo:{type:i,listener:$,path:{listener:u,update:c||r,resolved:void 0},params:f,options:s},value:g}):o[u].single.push({listener:$,listenersCollection:l,eventInfo:{type:i,listener:$,path:{listener:u,update:c||r,resolved:this.cleanNotRecursivePath(r)},params:f,options:s},value:p})}}else if(this.options.extraDebug){let f=!1;for(const d of l.listeners.values())d.options.debug&&(f=!0,console.log("[getSubscribedListeners] Listener was not fired because there was no match.",{listener:d,listenersCollection:l,updatePath:r}));f&&l.match(r,!0)}return o}notifySubscribedListeners(r,n,s,i="update",c=null){return this.getQueueNotifyListeners(this.getSubscribedListeners(r,n,s,i,c))}useBulkValue(r){for(const[n,s]of r.listeners)if(s.options.bulk&&s.options.bulkValue||!s.options.bulk)return!0;return!1}getNestedListeners(r,n,s,i="update",c=null){const o={},u={};for(let[l,f]of this.listeners){if(!f.isRecursive)continue;const d=this.cutPath(l,r);if(this.match(d,r)){o[l]={single:[],bulk:[]};const h=this.trimPath(l.substr(d.length)),p=this.useBulkValue(f);let g;p&&(g=u[h]?u[h]:new WildcardObject(n,this.options.delimiter,this.options.wildcard).get(h),u[h]=g);const $=f.paramsInfo?this.getParams(f.paramsInfo,r):void 0,b=[],w={};for(const[P,I]of f.listeners)if(p)for(const x in g){const _=()=>g[x],F=[r,x].join(this.options.delimiter),B={type:i,listener:I,listenersCollection:f,path:{listener:l,update:c||r,resolved:this.cleanNotRecursivePath(F)},params:$,options:s};this.shouldIgnore(I,r)||(I.options.bulk?(b.push({value:_,path:F,params:$}),w[P]=I):o[l].single.push({listener:I,listenersCollection:f,eventInfo:B,value:_}))}else{const x={type:i,listener:I,listenersCollection:f,path:{listener:l,update:c||r,resolved:void 0},params:$,options:s};if(this.shouldIgnore(I,r))continue;I.options.bulk?(b.push({value:void 0,path:void 0,params:$}),w[P]=I):o[l].single.push({listener:I,listenersCollection:f,eventInfo:x,value:void 0})}for(const P in w){const I=w[P],x={type:i,listener:I,listenersCollection:f,path:{listener:l,update:r,resolved:void 0},options:s,params:$};o[l].bulk.push({listener:I,listenersCollection:f,eventInfo:x,value:b})}}else if(this.options.extraDebug)for(const h of f.listeners.values())h.options.debug&&console.log("[getNestedListeners] Listener was not fired because there was no match.",{listener:h,listenersCollection:f,currentCutPath:d,updatePath:r})}return o}notifyNestedListeners(r,n,s,i="update",c,o=null){return this.getQueueNotifyListeners(this.getNestedListeners(r,n,s,i,o),c)}getNotifyOnlyListeners(r,n,s,i="update",c=null){const o={};if(typeof s.only!="object"||!Array.isArray(s.only)||typeof s.only[0]>"u"||!this.canBeNested(n))return o;for(const u of s.only){const l=new WildcardObject(n,this.options.delimiter,this.options.wildcard).get(u);o[u]={bulk:[],single:[]};for(const f in l){const d=r+this.options.delimiter+f;for(const[h,p]of this.listeners){const g=p.paramsInfo?this.getParams(p.paramsInfo,d):void 0;if(this.match(h,d)){const $=()=>l[f],b=[{value:$,path:d,params:g}];for(const w of p.listeners.values()){const P={type:i,listener:w,listenersCollection:p,path:{listener:h,update:c||r,resolved:this.cleanNotRecursivePath(d)},params:g,options:s};this.shouldIgnore(w,r)||(w.options.bulk?o[u].bulk.some(I=>I.listener===w)||o[u].bulk.push({listener:w,listenersCollection:p,eventInfo:P,value:b}):o[u].single.push({listener:w,listenersCollection:p,eventInfo:P,value:$}))}}}}}return o}runQueue(r){const n=[];for(const s of r)s.options.group?n.includes(s.groupId)||(s.fn(),n.push(s.groupId)):s.fn()}sortAndRunQueue(r,n){r.sort(function(s,i){return s.id-i.id}),this.options.debug&&console.log("[deep-state-observer] queue for ".concat(n),r),this.runQueue(r)}notifyOnly(r,n,s,i="update",c=""){const o=this.getQueueNotifyListeners(this.getNotifyOnlyListeners(r,n,s,i,c));this.sortAndRunQueue(o,r)}canBeNested(r){return typeof r=="object"&&r!==null}getUpdateValues(r,n){let s=n;return typeof n=="function"&&(s=n(r)),{newValue:s,oldValue:r}}wildcardNotify(r,n){let s=[];for(const i of r)this.getQueueNotifyListeners(i,s);for(const i of n)this.executeWaitingListeners(i);return this.jobsRunning--,s}wildcardUpdate(r,n,s=defaultUpdateOptions,i=!1){++this.jobsRunning,s=Object.assign(Object.assign({},defaultUpdateOptions),s);const c=this.scan.get(r),o={};for(const d in c){const h=this.split(d),{oldValue:p,newValue:g}=this.getUpdateValues(c[d],n);(!this.same(g,p)||s.force)&&(this.pathSet(h,g,this.data),o[d]=g)}const u=[],l=[];for(const d in o){const h=o[d];s.only.length?u.push(this.getNotifyOnlyListeners(d,h,s,"update",r)):(u.push(this.getSubscribedListeners(d,h,s,"update",r)),this.canBeNested(h)&&u.push(this.getNestedListeners(d,h,s,"update",r))),s.debug&&this.options.log("Wildcard update",{path:d,newValue:h}),l.push(d)}if(i){const d=this;return function(){const h=d.wildcardNotify(u,l);d.sortAndRunQueue(h,r)}}const f=this.wildcardNotify(u,l);this.sortAndRunQueue(f,r)}runUpdateQueue(){if(!this.destroyed)for(;this.updateQueue.length&&this.updateQueue.length<this.options.maxSimultaneousJobs;){const r=this.updateQueue.shift();r.options.queue=!1,this.update(r.updatePath,r.fnOrValue,r.options,r.multi)}}updateNotify(r,n,s){const i=this.notifySubscribedListeners(r,n,s);this.canBeNested(n)&&this.notifyNestedListeners(r,n,s,"update",i),this.sortAndRunQueue(i,r),this.executeWaitingListeners(r)}updateNotifyAll(r){let n=[];for(const s of r){const i=s.newValue;if(this.tracing.length){const c=this.tracing[this.tracing.length-1],o=this.traceMap.get(c);o.changed.push({traceId:c,updatePath:s.updatePath,fnOrValue:i,options:s.options}),this.traceMap.set(c,o)}n=n.concat(this.notifySubscribedListeners(s.updatePath,i,s.options)),this.canBeNested(s.newValue)&&this.notifyNestedListeners(s.updatePath,i,s.options,"update",n)}this.runQueue(n)}updateNotifyOnly(r,n,s){this.notifyOnly(r,n,s),this.executeWaitingListeners(r)}update(r,n,s=Object.assign({},defaultUpdateOptions),i=!1){if(this.destroyed)return;if(this.collection)return this.collection.update(r,n,s);if(this.tracing.length){const d=this.tracing[this.tracing.length-1],h=this.traceMap.get(d);h.changed.push({traceId:d,updatePath:r,fnOrValue:n,options:s}),this.traceMap.set(d,h)}const c=this.jobsRunning;if((this.options.queue||s.queue)&&c){if(c>this.options.maxSimultaneousJobs)throw new Error("Maximal simultaneous jobs limit reached.");this.updateQueue.push({updatePath:r,fnOrValue:n,options:s,multi:i});const d=Promise.resolve().then(()=>{this.runUpdateQueue()});return i?function(){return d}:d}if(this.isWildcard(r))return this.wildcardUpdate(r,n,s,i);++this.jobsRunning;const o=this.split(r),u=this.pathGet(o,this.data);let{oldValue:l,newValue:f}=this.getUpdateValues(u,n);if(s.debug&&this.options.log("Updating ".concat(r," ").concat(s.source?"from ".concat(s.source):""),{oldValue:l,newValue:f}),this.same(f,l)&&!s.force)return--this.jobsRunning,i?function(){return f}:f;if(this.pathSet(o,f,this.data),s=Object.assign(Object.assign({},defaultUpdateOptions),s),s.only===null)return--this.jobsRunning,i?function(){}:f;if(s.only.length){if(--this.jobsRunning,i){const d=this;return function(){return d.updateNotifyOnly(r,f,s)}}return this.updateNotifyOnly(r,f,s),f}if(i){--this.jobsRunning;const d=this;return function(){return d.updateNotify(r,f,s)}}return this.updateNotify(r,f,s),--this.jobsRunning,f}multi(r=!1){if(this.destroyed)return{update(){return this},done(){},getStack(){return[]}};if(this.collection)return this.collection;const n=this,s=[],i=[];return{update(o,u,l=defaultUpdateOptions){if(r){const f=n.split(o);let d=u;const h=n.pathGet(f,n.data);typeof d=="function"&&(d=d(h)),n.pathSet(f,d,n.data),s.push({updatePath:o,newValue:d,options:l})}else i.push(n.update(o,u,l,!0));return this},done(){if(n.collections===0){if(r)n.updateNotifyAll(s);else for(const o of i)o();s.length=0}},getStack(){return s}}}collect(){return this.collections++,this.collection||(this.collection=this.multi(!0)),this.collection}executeCollected(){if(this.collections--,this.collections===0&&this.collection){const r=this.collection;this.collection=null,r.done()}}getCollectedCount(){return this.collections}getCollectedStack(){return this.collection?this.collection.getStack():[]}get(r=void 0){if(!this.destroyed)return r===void 0||r===""?this.data:this.isWildcard(r)?this.scan.get(r):this.pathGet(this.split(r),this.data)}last(r){let n=this.lastExecs.get(r);n||(n={calls:0},this.lastExecs.set(r,n));const s=++n.calls;this.resolved.then(()=>{s===n.calls&&(this.lastExecs.set(r,{calls:0}),r())})}isMuted(r){if(!this.options.useMute)return!1;if(typeof r=="function")return this.isMutedListener(r);for(const n of this.muted){const s=!this.isNotRecursive(n),i=this.trimPath(n);if(this.match(r,i)||this.match(i,r))return!0;if(s){const c=this.cutPath(i,r);if(this.match(c,n)||this.match(n,c))return!0}}return!1}isMutedListener(r){return this.mutedListeners.has(r)}mute(r){if(typeof r=="function")return this.mutedListeners.add(r);this.muted.add(r)}unmute(r){if(typeof r=="function")return this.mutedListeners.delete(r);this.muted.delete(r)}debugSubscribe(r,n,s){r.options.debug&&this.options.log("listener subscribed",{listenerPath:s,listener:r,listenersCollection:n})}debugListener(r,n){(n.eventInfo.options.debug||n.listener.options.debug)&&this.options.log("Listener fired",{time:Date.now()-r,info:n})}debugTime(r){return r.listener.options.debug||r.eventInfo.options.debug?Date.now():0}startTrace(r,n=null){this.traceId++;const s=this.traceId+":"+r;return this.traceMap.set(s,{id:s,sort:this.traceId,stack:this.tracing.map(i=>i),additionalData:n,changed:[]}),this.tracing.push(s),s}stopTrace(r){const n=this.traceMap.get(r);return this.tracing.pop(),this.traceMap.delete(r),n}saveTrace(r){const n=this.traceMap.get(r);return this.tracing.pop(),this.traceMap.delete(r),this.savedTrace.push(n),n}getSavedTraces(){const r=this.savedTrace.map(n=>n);return r.sort((n,s)=>n.sort-s.sort),this.savedTrace=[],r}}var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$f=Object.prototype,hasOwnProperty$c=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(e){var r=hasOwnProperty$c.call(e,symToStringTag$1),n=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var s=!0}catch(c){}var i=nativeObjectToString$1.call(e);return s&&(r?e[symToStringTag$1]=n:delete e[symToStringTag$1]),i}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString(e){return nativeObjectToString.call(e)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(e){return e==null?e===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString(e)}function isObjectLike(e){return e!=null&&typeof e=="object"}var symbolTag$2="[object Symbol]";function isSymbol(e){return typeof e=="symbol"||isObjectLike(e)&&baseGetTag(e)==symbolTag$2}function arrayMap(e,r){for(var n=-1,s=e==null?0:e.length,i=Array(s);++n<s;)i[n]=r(e[n],n,e);return i}var isArray$1=Array.isArray,INFINITY$1=1/0,symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString(e){if(typeof e=="string")return e;if(isArray$1(e))return arrayMap(e,baseToString)+"";if(isSymbol(e))return symbolToString?symbolToString.call(e):"";var r=e+"";return r=="0"&&1/e==-INFINITY$1?"-0":r}function isObject$1(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}function identity(e){return e}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(e){if(!isObject$1(e))return!1;var r=baseGetTag(e);return r==funcTag$2||r==genTag$1||r==asyncTag||r==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(e){if(e!=null){try{return funcToString$2.call(e)}catch(r){}try{return e+""}catch(r){}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$b=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$b).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){if(!isObject$1(e)||isMasked(e))return!1;var r=isFunction$1(e)?reIsNative:reIsHostCtor;return r.test(toSource(e))}function getValue(e,r){return e==null?void 0:e[r]}function getNative(e,r){var n=getValue(e,r);return baseIsNative(n)?n:void 0}var WeakMap$1=getNative(root,"WeakMap"),objectCreate=Object.create,baseCreate=function(){function e(){}return function(r){if(!isObject$1(r))return{};if(objectCreate)return objectCreate(r);e.prototype=r;var n=new e;return e.prototype=void 0,n}}();function apply(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}function noop(){}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(e){var r=0,n=0;return function(){var s=nativeNow(),i=HOT_SPAN-(s-n);if(n=s,i>0){if(++r>=HOT_COUNT)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}function constant(e){return function(){return e}}var defineProperty=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch(r){}}(),baseSetToString=defineProperty?function(e,r){return defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:constant(r),writable:!0})}:identity,setToString=shortOut(baseSetToString);function arrayEach(e,r){for(var n=-1,s=e==null?0:e.length;++n<s&&r(e[n],n,e)!==!1;);return e}function baseFindIndex(e,r,n,s){for(var i=e.length,c=n+-1;++c<i;)if(r(e[c],c,e))return c;return-1}function baseIsNaN(e){return e!==e}function strictIndexOf(e,r,n){for(var s=n-1,i=e.length;++s<i;)if(e[s]===r)return s;return-1}function baseIndexOf(e,r,n){return r===r?strictIndexOf(e,r,n):baseFindIndex(e,baseIsNaN,n)}function arrayIncludes(e,r){var n=e==null?0:e.length;return!!n&&baseIndexOf(e,r,0)>-1}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,r){var n=typeof e;return r=r==null?MAX_SAFE_INTEGER$1:r,!!r&&(n=="number"||n!="symbol"&&reIsUint.test(e))&&e>-1&&e%1==0&&e<r}function baseAssignValue(e,r,n){r=="__proto__"&&defineProperty?defineProperty(e,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[r]=n}function eq(e,r){return e===r||e!==e&&r!==r}var objectProto$c=Object.prototype,hasOwnProperty$a=objectProto$c.hasOwnProperty;function assignValue(e,r,n){var s=e[r];(!(hasOwnProperty$a.call(e,r)&&eq(s,n))||n===void 0&&!(r in e))&&baseAssignValue(e,r,n)}function copyObject(e,r,n,s){var i=!n;n||(n={});for(var c=-1,o=r.length;++c<o;){var u=r[c],l=s?s(n[u],e[u],u,n,e):void 0;l===void 0&&(l=e[u]),i?baseAssignValue(n,u,l):assignValue(n,u,l)}return n}var nativeMax=Math.max;function overRest(e,r,n){return r=nativeMax(r===void 0?e.length-1:r,0),function(){for(var s=arguments,i=-1,c=nativeMax(s.length-r,0),o=Array(c);++i<c;)o[i]=s[r+i];i=-1;for(var u=Array(r+1);++i<r;)u[i]=s[i];return u[r]=n(o),apply(e,this,u)}}function baseRest(e,r){return setToString(overRest(e,r,identity),e+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isArrayLike(e){return e!=null&&isLength(e.length)&&!isFunction$1(e)}function isIterateeCall(e,r,n){if(!isObject$1(n))return!1;var s=typeof r;return(s=="number"?isArrayLike(n)&&isIndex(r,n.length):s=="string"&&r in n)?eq(n[r],e):!1}function createAssigner(e){return baseRest(function(r,n){var s=-1,i=n.length,c=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(c=e.length>3&&typeof c=="function"?(i--,c):void 0,o&&isIterateeCall(n[0],n[1],o)&&(c=i<3?void 0:c,i=1),r=Object(r);++s<i;){var u=n[s];u&&e(r,u,s,c)}return r})}var objectProto$b=Object.prototype;function isPrototype(e){var r=e&&e.constructor,n=typeof r=="function"&&r.prototype||objectProto$b;return e===n}function baseTimes(e,r){for(var n=-1,s=Array(e);++n<e;)s[n]=r(n);return s}var argsTag$2="[object Arguments]";function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==argsTag$2}var objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&hasOwnProperty$9.call(e,"callee")&&!propertyIsEnumerable$1.call(e,"callee")};function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$1=moduleExports$2?root.Buffer:void 0,nativeIsBuffer=Buffer$1?Buffer$1.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$4="[object Map]",numberTag$2="[object Number]",objectTag$3="[object Object]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$2]=typedArrayTags[boolTag$2]=typedArrayTags[dataViewTag$3]=typedArrayTags[dateTag$2]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$4]=typedArrayTags[numberTag$2]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag$2]=typedArrayTags[setTag$4]=typedArrayTags[stringTag$2]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}function baseUnary(e){return function(r){return e(r)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var e=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return e||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(r){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function arrayLikeKeys(e,r){var n=isArray$1(e),s=!n&&isArguments(e),i=!n&&!s&&isBuffer$1(e),c=!n&&!s&&!i&&isTypedArray(e),o=n||s||i||c,u=o?baseTimes(e.length,String):[],l=u.length;for(var f in e)(r||hasOwnProperty$8.call(e,f))&&!(o&&(f=="length"||i&&(f=="offset"||f=="parent")||c&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||isIndex(f,l)))&&u.push(f);return u}function overArg(e,r){return function(n){return e(r(n))}}var nativeKeys=overArg(Object.keys,Object),objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function baseKeys(e){if(!isPrototype(e))return nativeKeys(e);var r=[];for(var n in Object(e))hasOwnProperty$7.call(e,n)&&n!="constructor"&&r.push(n);return r}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function nativeKeysIn(e){var r=[];if(e!=null)for(var n in Object(e))r.push(n);return r}var objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function baseKeysIn(e){if(!isObject$1(e))return nativeKeysIn(e);var r=isPrototype(e),n=[];for(var s in e)s=="constructor"&&(r||!hasOwnProperty$6.call(e,s))||n.push(s);return n}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var assignInWith=createAssigner(function(e,r,n,s){copyObject(r,keysIn(r),e,s)}),nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function hashGet(e){var r=this.__data__;if(nativeCreate){var n=r[e];return n===HASH_UNDEFINED$2?void 0:n}return hasOwnProperty$5.call(r,e)?r[e]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function hashHas(e){var r=this.__data__;return nativeCreate?r[e]!==void 0:hasOwnProperty$4.call(r,e)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,r){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nativeCreate&&r===void 0?HASH_UNDEFINED$1:r,this}function Hash(e){var r=-1,n=e==null?0:e.length;for(this.clear();++r<n;){var s=e[r];this.set(s[0],s[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(e,r){for(var n=e.length;n--;)if(eq(e[n][0],r))return n;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var r=this.__data__,n=assocIndexOf(r,e);if(n<0)return!1;var s=r.length-1;return n==s?r.pop():splice.call(r,n,1),--this.size,!0}function listCacheGet(e){var r=this.__data__,n=assocIndexOf(r,e);return n<0?void 0:r[n][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,r){var n=this.__data__,s=assocIndexOf(n,e);return s<0?(++this.size,n.push([e,r])):n[s][1]=r,this}function ListCache(e){var r=-1,n=e==null?0:e.length;for(this.clear();++r<n;){var s=e[r];this.set(s[0],s[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}function getMapData(e,r){var n=e.__data__;return isKeyable(r)?n[typeof r=="string"?"string":"hash"]:n.map}function mapCacheDelete(e){var r=getMapData(this,e).delete(e);return this.size-=r?1:0,r}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,r){var n=getMapData(this,e),s=n.size;return n.set(e,r),this.size+=n.size==s?0:1,this}function MapCache(e){var r=-1,n=e==null?0:e.length;for(this.clear();++r<n;){var s=e[r];this.set(s[0],s[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function toString$1(e){return e==null?"":baseToString(e)}function arrayPush(e,r){for(var n=-1,s=r.length,i=e.length;++n<s;)e[i+n]=r[n];return e}var spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0;function isFlattenable(e){return isArray$1(e)||isArguments(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}function baseFlatten(e,r,n,s,i){var c=-1,o=e.length;for(n||(n=isFlattenable),i||(i=[]);++c<o;){var u=e[c];n(u)&&arrayPush(i,u)}return i}var getPrototype=overArg(Object.getPrototypeOf,Object),objectTag$2="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$3=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$1(e){if(!isObjectLike(e)||baseGetTag(e)!=objectTag$2)return!1;var r=getPrototype(e);if(r===null)return!0;var n=hasOwnProperty$3.call(r,"constructor")&&r.constructor;return typeof n=="function"&&n instanceof n&&funcToString.call(n)==objectCtorString}var domExcTag="[object DOMException]",errorTag$1="[object Error]";function isError(e){if(!isObjectLike(e))return!1;var r=baseGetTag(e);return r==errorTag$1||r==domExcTag||typeof e.message=="string"&&typeof e.name=="string"&&!isPlainObject$1(e)}var attempt=baseRest(function(e,r){try{return apply(e,void 0,r)}catch(n){return isError(n)?n:new Error(n)}});function basePropertyOf(e){return function(r){return e==null?void 0:e[r]}}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}var LARGE_ARRAY_SIZE$1=200;function stackSet(e,r){var n=this.__data__;if(n instanceof ListCache){var s=n.__data__;if(!Map$1||s.length<LARGE_ARRAY_SIZE$1-1)return s.push([e,r]),this.size=++n.size,this;n=this.__data__=new MapCache(s)}return n.set(e,r),this.size=n.size,this}function Stack(e){var r=this.__data__=new ListCache(e);this.size=r.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root.Buffer:void 0;Buffer&&Buffer.allocUnsafe;function cloneBuffer(e,r){return e.slice()}function arrayFilter(e,r){for(var n=-1,s=e==null?0:e.length,i=0,c=[];++n<s;){var o=e[n];r(o,n,e)&&(c[i++]=o)}return c}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(e){return e==null?[]:(e=Object(e),arrayFilter(nativeGetSymbols$1(e),function(r){return propertyIsEnumerable.call(e,r)}))}:stubArray;function baseGetAllKeys(e,r,n){var s=r(e);return isArray$1(e)?s:arrayPush(s,n(e))}function getAllKeys(e){return baseGetAllKeys(e,keys,getSymbols)}var DataView=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),mapTag$3="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$3="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$2||Map$1&&getTag(new Map$1)!=mapTag$3||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$3||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag$1)&&(getTag=function(e){var r=baseGetTag(e),n=r==objectTag$1?e.constructor:void 0,s=n?toSource(n):"";if(s)switch(s){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$3;case promiseCtorString:return promiseTag;case setCtorString:return setTag$3;case weakMapCtorString:return weakMapTag$1}return r});var objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function initCloneArray(e){var r=e.length,n=new e.constructor(r);return r&&typeof e[0]=="string"&&hasOwnProperty$2.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(e){var r=new e.constructor(e.byteLength);return new Uint8Array$1(r).set(new Uint8Array$1(e)),r}function cloneDataView(e,r){var n=cloneArrayBuffer(e.buffer);return new e.constructor(n,e.byteOffset,e.byteLength)}var reFlags=/\w*$/;function cloneRegExp(e){var r=new e.constructor(e.source,reFlags.exec(e));return r.lastIndex=e.lastIndex,r}var symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function cloneSymbol(e){return symbolValueOf?Object(symbolValueOf.call(e)):{}}function cloneTypedArray(e,r){var n=cloneArrayBuffer(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}var boolTag$1="[object Boolean]",dateTag$1="[object Date]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(e,r,n){var s=e.constructor;switch(r){case arrayBufferTag$1:return cloneArrayBuffer(e);case boolTag$1:case dateTag$1:return new s(+e);case dataViewTag$1:return cloneDataView(e);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(e);case mapTag$2:return new s;case numberTag$1:case stringTag$1:return new s(e);case regexpTag$1:return cloneRegExp(e);case setTag$2:return new s;case symbolTag$1:return cloneSymbol(e)}}function initCloneObject(e){return typeof e.constructor=="function"&&!isPrototype(e)?baseCreate(getPrototype(e)):{}}var mapTag$1="[object Map]";function baseIsMap(e){return isObjectLike(e)&&getTag(e)==mapTag$1}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$1="[object Set]";function baseIsSet(e){return isObjectLike(e)&&getTag(e)==setTag$1}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(e,r,n,s,i,c){var o;if(o!==void 0)return o;if(!isObject$1(e))return e;var u=isArray$1(e);if(u)o=initCloneArray(e);else{var l=getTag(e),f=l==funcTag||l==genTag;if(isBuffer$1(e))return cloneBuffer(e);if(l==objectTag||l==argsTag||f&&!i)o=f?{}:initCloneObject(e);else{if(!cloneableTags[l])return i?e:{};o=initCloneByTag(e,l)}}c||(c=new Stack);var d=c.get(e);if(d)return d;c.set(e,o),isSet(e)?e.forEach(function(g){o.add(baseClone(g,r,n,g,e,c))}):isMap(e)&&e.forEach(function(g,$){o.set($,baseClone(g,r,n,$,e,c))});var h=getAllKeys,p=u?void 0:h(e);return arrayEach(p||e,function(g,$){p&&($=g,g=e[$]),assignValue(o,$,baseClone(g,r,n,$,e,c))}),o}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(e){return baseClone(e,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED),this}function setCacheHas(e){return this.__data__.has(e)}function SetCache(e){var r=-1,n=e==null?0:e.length;for(this.__data__=new MapCache;++r<n;)this.add(e[r])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function cacheHas(e,r){return e.has(r)}function setToArray(e){var r=-1,n=Array(e.size);return e.forEach(function(s){n[++r]=s}),n}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},escapeHtmlChar=basePropertyOf(htmlEscapes),reUnescapedHtml=/[&<>"']/g,reHasUnescapedHtml=RegExp(reUnescapedHtml.source);function escape(e){return e=toString$1(e),e&&reHasUnescapedHtml.test(e)?e.replace(reUnescapedHtml,escapeHtmlChar):e}function baseValues(e,r){return arrayMap(r,function(n){return e[n]})}var objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function customDefaultsAssignIn(e,r,n,s){return e===void 0||eq(e,objectProto$1[n])&&!hasOwnProperty$1.call(s,n)?r:e}var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function escapeStringChar(e){return"\\"+stringEscapes[e]}var reInterpolate=/<%=([\s\S]+?)%>/g,reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:{escape}}},INVALID_TEMPL_VAR_ERROR_TEXT="Invalid `variable` option passed into `_.template`",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reForbiddenIdentifierChars=/[()=,{}\[\]\/\s]/,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function template(e,r,n){var s=templateSettings.imports._.templateSettings||templateSettings;e=toString$1(e),r=assignInWith({},r,s,customDefaultsAssignIn);var i=assignInWith({},r.imports,s.imports,customDefaultsAssignIn),c=keys(i),o=baseValues(i,c),u,l,f=0,d=r.interpolate||reNoMatch,h="__p += '",p=RegExp((r.escape||reNoMatch).source+"|"+d.source+"|"+(d===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(r.evaluate||reNoMatch).source+"|$","g"),g=hasOwnProperty.call(r,"sourceURL")?"//# sourceURL="+(r.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(p,function(w,P,I,x,_,F){return I||(I=x),h+=e.slice(f,F).replace(reUnescapedString,escapeStringChar),P&&(u=!0,h+="' +\n__e("+P+") +\n'"),_&&(l=!0,h+="';\n"+_+";\n__p += '"),I&&(h+="' +\n((__t = ("+I+")) == null ? '' : __t) +\n'"),f=F+w.length,w}),h+="';\n";var $=hasOwnProperty.call(r,"variable")&&r.variable;if(!$)h="with (obj) {\n"+h+"\n}\n";else if(reForbiddenIdentifierChars.test($))throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT);h=(l?h.replace(reEmptyStringLeading,""):h).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),h="function("+($||"obj")+") {\n"+($?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(l?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var b=attempt(function(){return Function(c,g+"return "+h).apply(void 0,o)});if(b.source=h,isError(b))throw b;return b}var INFINITY=1/0,createSet=Set$1&&1/setToArray(new Set$1([,-0]))[1]==INFINITY?function(e){return new Set$1(e)}:noop,LARGE_ARRAY_SIZE=200;function baseUniq(e,r,n){var s=-1,i=arrayIncludes,c=e.length,o=!0,u=[],l=u;if(c>=LARGE_ARRAY_SIZE){var f=createSet(e);if(f)return setToArray(f);o=!1,i=cacheHas,l=new SetCache}else l=u;e:for(;++s<c;){var d=e[s],h=d;if(d=d!==0?d:0,o&&h===h){for(var p=l.length;p--;)if(l[p]===h)continue e;u.push(d)}else i(l,h,n)||(l!==u&&l.push(h),u.push(d))}return u}var union=baseRest(function(e){return baseUniq(baseFlatten(e,1,isArrayLikeObject))});class ObservedData{}class SimpleObservedData extends ObservedData{constructor(n){super();m(this,"data",{});m(this,"event",new eventsExports.EventEmitter);this.data=n}update(n,s){s?setValueByKeyPath(s,n,this.data):this.data=n;const i={updateData:n,path:s!=null?s:""};s&&this.event.emit(s,i),this.event.emit("",i)}on(n,s){this.event.on(n,s)}off(n,s){this.event.off(n,s)}getData(n){return n?getValueByKeyPath(n,this.data):this.data}destroy(){}}var pe,oe,ce,X,re,ue;class DataSource extends EventEmitter$1{constructor(n){var c,o,u,l,f;super();m(this,"isInit",!1);m(this,"app");m(this,"mockData");K(this,pe,"base");K(this,oe);K(this,ce);K(this,X);K(this,re,[]);K(this,ue,[]);z(this,oe,n.schema.id),z(this,ce,n.schema),this.app=n.app,this.setFields(n.schema.fields),this.setMethods(n.schema.methods||[]);let s=n.initialData;const i=n.ObservedDataClass||SimpleObservedData;if(this.app.platform==="editor")this.mockData=((o=(c=n.schema.mocks)==null?void 0:c.find(d=>d.useInEditor))==null?void 0:o.data)||this.getDefaultData(),s=this.mockData;else if(typeof n.useMock=="boolean"&&n.useMock)this.mockData=((l=(u=n.schema.mocks)==null?void 0:u.find(d=>d.enable))==null?void 0:l.data)||this.getDefaultData(),s=this.mockData;else if(!n.initialData)s=this.getDefaultData();else{z(this,X,new i((f=n.initialData)!=null?f:{})),this.isInit=!0;return}z(this,X,new i(s!=null?s:{}))}get id(){return k(this,oe)}get type(){return k(this,pe)}get schema(){return k(this,ce)}get fields(){return k(this,re)}get methods(){return k(this,ue)}setFields(n){z(this,re,n)}setMethods(n){z(this,ue,n)}get data(){return k(this,X).getData("")}setData(n,s){k(this,X).update(n,s);const i={updateData:n,path:s};this.emit("change",i)}setValue(n,s){return this.setData(s,n)}onDataChange(n,s){k(this,X).on(n,s)}offDataChange(n,s){k(this,X).off(n,s)}getDefaultData(){return getDefaultValueFromFields(k(this,re))}async init(){this.isInit=!0}destroy(){z(this,re,[]),this.removeAllListeners(),k(this,X).destroy()}}pe=new WeakMap,oe=new WeakMap,ce=new WeakMap,X=new WeakMap,re=new WeakMap,ue=new WeakMap;const urlencoded=e=>Object.entries(e).reduce((r,[n,s])=>{let i=s;return typeof s=="object"&&(i=JSON.stringify(s)),typeof s<"u"?"".concat(r).concat(r?"&":"").concat(globalThis.encodeURIComponent(n),"=").concat(globalThis.encodeURIComponent("".concat(i))):r},""),webRequest=async e=>{var d;const{url:r,method:n="GET",headers:s={},params:i={},data:c={},...o}=e,u=urlencoded(i);let l=JSON.stringify(c);return(d=s["Content-Type"])!=null&&d.includes("application/x-www-form-urlencoded")&&(l=urlencoded(c)),(await globalThis.fetch(u?"".concat(r,"?").concat(u):r,{method:n,headers:s,body:n==="GET"?void 0:l,...o})).json()};var se,le,fe,ge;class HttpDataSource extends DataSource{constructor(n){const{options:s}=n.schema;super(n);m(this,"isLoading",!1);m(this,"error");m(this,"httpOptions");K(this,se);K(this,le,[]);K(this,fe,[]);K(this,ge,"http");this.httpOptions=s,typeof n.request=="function"?z(this,se,n.request):typeof globalThis.fetch=="function"&&z(this,se,webRequest),this.methods.forEach(i=>{typeof i.content=="function"&&(i.timing==="beforeRequest"&&k(this,le).push(i.content),i.timing==="afterRequest"&&k(this,fe).push(i.content))})}get type(){return k(this,ge)}async init(){this.schema.autoFetch&&await this.request(this.httpOptions),super.init()}async request(n={}){var i,c;this.isLoading=!0;let s={...this.httpOptions,...n};try{for(const u of k(this,le))await u({options:s,params:{},dataSource:this,app:this.app});typeof this.schema.beforeRequest=="function"&&(s=this.schema.beforeRequest(s,{app:this.app,dataSource:this}));let o=this.mockData?this.mockData:await((i=k(this,se))==null?void 0:i.call(this,s));for(const u of k(this,fe))await u({res:o,options:s,params:{},dataSource:this,app:this.app});if(typeof this.schema.afterResponse=="function"&&(o=this.schema.afterResponse(o,{app:this.app,dataSource:this,options:s})),(c=this.schema.responseOptions)!=null&&c.dataPath){const u=getValueByKeyPath(this.schema.responseOptions.dataPath,o);this.setData(u)}else this.setData(o);this.error=void 0}catch(o){this.error={msg:o.message},this.emit("error",o)}this.isLoading=!1}get(n){return this.request({...n,method:"GET"})}post(n){return this.request({...n,method:"POST"})}}se=new WeakMap,le=new WeakMap,fe=new WeakMap,ge=new WeakMap;const compiledCondition=(e,r)=>{let n=!0;for(const{op:s,value:i,range:c,field:o}of e){const[u,...l]=o,f=r[u];if(!f||!l.length)break;const d=getValueByKeyPath(l.join("."),f);if(!compiledCond(s,d,i,c)){n=!1;break}}return n},compliedConditions=(e,r)=>{if(!e.displayConds||!Array.isArray(e.displayConds)||!e.displayConds.length)return!0;for(const{cond:n}of e.displayConds)if(n&&compiledCondition(n,r))return!0;return!1},compliedIteratorItemConditions=(e=[],r)=>{if(!e||!Array.isArray(e)||!e.length)return!0;for(const{cond:n}of e){if(!n)continue;let s=!0;for(const{op:i,value:c,range:o,field:u}of n){const l=getValueByKeyPath(u.join("."),r);if(!compiledCond(i,l,c,o)){s=!1;break}}if(s)return s}return!1},updateNode=(e,r)=>{var n;if(isPage(e)||isPageFragment(e)){const s=(n=r.items)==null?void 0:n.findIndex(i=>i.id===e.id);r.items.splice(s,1,e)}else replaceChildNode(e,r.items)},createIteratorContentData=(e,r,n=[],s={})=>{const i={...s,[r]:{}};return n.reduce((c,o,u)=>(c[o]=u===n.length-1?e:{},c[o]),i[r]),i},compliedDataSourceField=(e,r)=>{const[n,...s]=e,i=n.indexOf(DATA_SOURCE_FIELDS_SELECT_VALUE_PREFIX);if(i>-1){const c=n.substring(i+DATA_SOURCE_FIELDS_SELECT_VALUE_PREFIX.length),o=r[c];return o?getValueByKeyPath(s.join("."),o):e}return e},compiledNodeField=(e,r)=>typeof e=="string"?template(e)(r):e!=null&&e.isBindDataSource&&e.dataSourceId?r[e.dataSourceId]:e!=null&&e.isBindDataSourceField&&e.dataSourceId&&typeof e.template=="string"?template(e.template)(r[e.dataSourceId]):Array.isArray(e)&&typeof e[0]=="string"?compliedDataSourceField(e,r):e,compliedIteratorItems=(e,r,n,s=[],i,c=!1)=>{const o=new Watcher;o.addTarget(new Target({id:n,type:"data-source",isTarget:(f,d)=>"".concat(f).startsWith(DSL_NODE_KEY_COPY_PREFIX)?!1:isDataSourceTemplate(d,n)||isUseDataSourceField(d,n)})),o.addTarget(new Target({id:n,type:"cond",isTarget:(f,d)=>!(!Array.isArray(d)||d[0]!==n||!"".concat(f).startsWith("displayConds"))})),o.collect(r,{},!0);const{deps:u}=o.getTarget(n,"data-source"),{deps:l}=o.getTarget(n,"cond");return!Object.keys(u).length&&!Object.keys(l).length?r:r.map(f=>compliedIteratorItem({itemData:e,data:i,dsId:n,keys:s,inEditor:c,condDeps:l,item:f,deps:u}))},compliedIteratorItem=({itemData:e,data:r,dsId:n,keys:s,inEditor:i,condDeps:c,item:o,deps:u})=>{var p,g;const{items:l,...f}=o,d=cloneDeep(f);l&&!o.iteratorData&&(d.items=Array.isArray(l)?l.map($=>compliedIteratorItem({itemData:e,data:r,dsId:n,keys:s,inEditor:i,condDeps:c,item:$,deps:u})):l),Array.isArray(l)&&l.length?o.iteratorData?d.items=l:d.items=l.map($=>compliedIteratorItem({itemData:e,data:r,dsId:n,keys:s,inEditor:i,condDeps:c,item:$,deps:u})):d.items=l;const h=createIteratorContentData(e,n,s,r);return(p=c[d.id])!=null&&p.keys.length&&!i&&(d.condResult=compliedConditions(d,h)),(g=u[d.id])!=null&&g.keys.length?compiledNode($=>compiledNodeField($,h),d,{[n]:u},n):d},registerDataSourceOnDemand=async(e,r)=>{const{dataSourceMethodsDeps:n={},dataSourceCondDeps:s={},dataSourceDeps:i={},dataSources:c=[]}=e,o={};c.forEach(f=>{let d=s[f.id]||{};Object.keys(d).length||(d=i[f.id]||{}),Object.keys(d).length||(d=n[f.id]||{}),Object.keys(d).length&&r[f.type]&&(o[f.type]=r[f.type])});const u=await Promise.all(Object.values(o).map(f=>f())),l={};return u.forEach((f,d)=>{const h=Object.keys(o)[d];l[h]=f.default}),l},Y=class Y extends EventEmitter$1{constructor({app:n,useMock:s,initialData:i}){var o,u;super();m(this,"app");m(this,"dataSourceMap",new Map);m(this,"data",{});m(this,"useMock",!1);this.app=n,this.useMock=s,i&&(this.data=i),(u=(o=n.dsl)==null?void 0:o.dataSources)==null||u.forEach(l=>{this.addDataSource(l)});const c=Array.from(this.dataSourceMap);typeof Promise.allSettled=="function"?Promise.allSettled(c.map(([,l])=>this.init(l))).then(l=>{const f={},d={};l.forEach((h,p)=>{const g=c[p][0];h.status==="fulfilled"?f[g]=this.data[g]:h.status==="rejected"&&(d[g]=h.reason)}),this.emit("init",f,d)}):Promise.all(c.map(([,l])=>this.init(l))).then(()=>{this.emit("init",this.data)}).catch(()=>{this.emit("init",this.data)})}static register(n,s){Y.dataSourceClassMap.set(n,s)}static registe(n,s){Y.register(n,s)}static getDataSourceClass(n){return Y.dataSourceClassMap.get(n)}static registerObservedData(n){Y.ObservedDataClass=n}async init(n){var c;if(n.isInit||this.app.jsEngine&&((c=n.schema.disabledInitInJsEngine)!=null&&c.includes(this.app.jsEngine)))return;const s=[],i=[];n.methods.forEach(o=>{typeof o.content=="function"&&(o.timing==="beforeInit"&&s.push(o.content),o.timing==="afterInit"&&i.push(o.content))});for(const o of s)await o({params:{},dataSource:n,app:this.app});await n.init();for(const o of i)await o({params:{},dataSource:n,app:this.app})}get(n){return this.dataSourceMap.get(n)}async addDataSource(n){if(!n)return;const s=Y.dataSourceClassMap.get(n.type)||DataSource,i=new s({app:this.app,schema:n,request:this.app.request,useMock:this.useMock,initialData:this.data[n.id],ObservedDataClass:Y.ObservedDataClass});this.dataSourceMap.set(n.id,i),this.data[i.id]=i.data,i.on("change",c=>{this.setData(i,c)})}setData(n,s){this.data[n.id]=n.data,this.emit("change",n.id,s)}removeDataSource(n){var s;(s=this.get(n))==null||s.destroy(),delete this.data[n],this.dataSourceMap.delete(n)}updateSchema(n){n.forEach(s=>{if(!this.get(s.id))return;this.removeDataSource(s.id),this.addDataSource(s);const c=this.get(s.id);c&&this.init(c)})}compiledNode({items:n,...s},i,c=!1){var u;const o=cloneDeep(s);return n&&(o.items=Array.isArray(n)&&c?n.map(l=>this.compiledNode(l,i,c)):n),s.condResult===!1||s.visible===!1?o:compiledNode(l=>compiledNodeField(l,this.data),o,((u=this.app.dsl)==null?void 0:u.dataSourceDeps)||{},i)}compliedConds(n){return compliedConditions(n,this.data)}compliedIteratorItemConds(n,s=[]){return compliedIteratorItemConditions(s,n)}compliedIteratorItems(n,s,i=[]){const[c,...o]=i;return this.get(c)?compliedIteratorItems(n,s,c,o,this.data,this.app.platform==="editor"):s}destroy(){this.removeAllListeners(),this.data={},this.dataSourceMap.forEach(n=>{n.destroy()}),this.dataSourceMap.clear()}onDataChange(n,s,i){var c;return(c=this.get(n))==null?void 0:c.onDataChange(s,i)}offDataChange(n,s,i){var c;return(c=this.get(n))==null?void 0:c.offDataChange(s,i)}};m(Y,"dataSourceClassMap",new Map),m(Y,"ObservedDataClass",SimpleObservedData);let DataSourceManager=Y;DataSourceManager.register("http",HttpDataSource);const createDataSourceManager=(e,r,n)=>{const{dsl:s,platform:i}=e;if(!(s!=null&&s.dataSources))return;const c=new DataSourceManager({app:e,useMock:r,initialData:n});return s.dataSources&&s.dataSourceCondDeps&&i!=="editor"&&getNodes(getDepNodeIds(s.dataSourceCondDeps),s.items).forEach(o=>{o.condResult=c.compliedConds(o),updateNode(o,s)}),s.dataSources&&s.dataSourceDeps&&getNodes(getDepNodeIds(s.dataSourceDeps),s.items).forEach(o=>{updateNode(c.compiledNode(o),s)}),e.jsEngine!=="nodejs"&&c.on("change",(o,u)=>{var p,g,$;const l=((p=s.dataSourceDeps)==null?void 0:p[o])||{},f=((g=s.dataSourceCondDeps)==null?void 0:g[o])||{},d=union([...Object.keys(f),...Object.keys(l)]),h=($=e.page)!=null&&$.data&&e.platform!=="editor"?[e.page.data]:s.items;c.emit("update-data",getNodes(d,h).map(b=>{var P;e.platform!=="editor"&&(b.condResult=c.compliedConds(b));const w=c.compiledNode(b);if(typeof((P=e.page)==null?void 0:P.setData)=="function")if(isPage(w))e.page.setData(w);else{const I=e.page.getNode(b.id);I==null||I.setData(w)}return w}),o,u)}),c},ignoreFirstCall=e=>{let r=0;return(...n)=>{if(r===0){r+=1;return}return e(...n)}};class DeepObservedData extends ObservedData{constructor(n){super();m(this,"state");m(this,"subscribers",new Map);m(this,"update",(n,s)=>{var i;(i=this.state)==null||i.update(s!=null?s:"",n)});m(this,"on",(n,s)=>{var o;const i=this.state.subscribe(n,ignoreFirstCall(s)),c=(o=this.subscribers.get(n))!=null?o:new Map;c.set(s,i),this.subscribers.set(n,c)});m(this,"off",(n,s)=>{var c;const i=this.subscribers.get(n);i&&((c=i.get(s))==null||c(),i.delete(s))});m(this,"getData",n=>{var s;return this.state?(s=this.state)==null?void 0:s.get(n):{}});m(this,"destroy",()=>{this.subscribers.forEach(n=>{n.forEach(s=>s())})});this.state=new DeepState(n)}}class Env{constructor(r=globalThis.navigator.userAgent,n={}){m(this,"isIos",!1);m(this,"isIphone",!1);m(this,"isIpad",!1);m(this,"isAndroid",!1);m(this,"isAndroidPad",!1);m(this,"isMac",!1);m(this,"isWin",!1);m(this,"isMqq",!1);m(this,"isWechat",!1);m(this,"isWeb",!1);m(this,"isOpenHarmony",!1);this.isIphone=r.indexOf("iPhone")>=0,this.isIpad=/(iPad).*OS\s([\d_]+)/.test(r),this.isIos=this.isIphone||this.isIpad,this.isAndroid=r.indexOf("Android")>=0,this.isAndroidPad=this.isAndroid&&r.indexOf("Mobile")<0,this.isMac=r.indexOf("Macintosh")>=0,this.isWin=r.indexOf("Windows")>=0,this.isMqq=/QQ\/([\d.]+)/.test(r),this.isWechat=r.indexOf("MicroMessenger")>=0&&r.indexOf("wxwork")<0,this.isOpenHarmony=r.includes("OpenHarmony"),this.isWeb=!this.isIos&&!this.isAndroid&&!this.isOpenHarmony&&!/(WebOS|BlackBerry)/.test(r),Object.entries(n).forEach(([s,i])=>{this[s]=i})}}const COMMON_EVENT_PREFIX="magic:common:events:",COMMON_METHOD_PREFIX="magic:common:actions:",CommonMethod={SHOW:"show",HIDE:"hide",SCROLL_TO_VIEW:"scrollIntoView",SCROLL_TO_TOP:"scrollToTop"},getCommonEventName=e=>e.startsWith(COMMON_EVENT_PREFIX)?e:"".concat(COMMON_EVENT_PREFIX).concat(e),isCommonMethod=e=>e.startsWith(COMMON_METHOD_PREFIX),getDirectComponent=(e,r)=>{var s;if(!e)return!1;if(!e.id)return getDirectComponent(e.parentElement,r);const n=(s=r.page)==null?void 0:s.getNode(e.id);return n||!1},commonClickEventHandler=(e,r,n)=>{const s=getDirectComponent(n.target,e);s&&e.emit(getCommonEventName(r),s)},bindCommonEventListener=e=>{e.jsEngine==="browser"&&(window.document.body.addEventListener("click",r=>{commonClickEventHandler(e,"click",r)}),window.document.body.addEventListener("click",r=>{commonClickEventHandler(e,"click:capture",r)},!0))},triggerCommonMethod=(e,r)=>{var s;const{instance:n}=r;if(n)switch(e.replace(COMMON_METHOD_PREFIX,"")){case CommonMethod.SHOW:n.show();break;case CommonMethod.HIDE:n.hide();break;case CommonMethod.SCROLL_TO_VIEW:(s=n.$el)==null||s.scrollIntoView({behavior:"smooth"});break;case CommonMethod.SCROLL_TO_TOP:window.scrollTo({top:0,behavior:"smooth"});break}};class Flexible{constructor(r){m(this,"designWidth",375);m(this,"tid");m(this,"resizeHandler",()=>{clearTimeout(this.tid),this.tid=setTimeout(()=>{this.refreshRem()},300)});m(this,"pageshowHandler",r=>{r.persisted&&this.resizeHandler()});globalThis.document.readyState==="complete"?this.setBodyFontSize():globalThis.document.addEventListener("DOMContentLoaded",this.setBodyFontSize,!1),globalThis.addEventListener("resize",this.resizeHandler,!1),globalThis.addEventListener("pageshow",this.pageshowHandler,!1),typeof(r==null?void 0:r.designWidth)<"u"&&this.setDesignWidth(r.designWidth)}destroy(){globalThis.document.removeEventListener("DOMContentLoaded",this.setBodyFontSize,!1),globalThis.removeEventListener("resize",this.resizeHandler,!1),globalThis.removeEventListener("pageshow",this.pageshowHandler,!1)}setDesignWidth(r){this.designWidth=r,this.refreshRem()}setBodyFontSize(){globalThis.document.body.style.fontSize=".12rem"}refreshRem(){const{width:r}=document.documentElement.getBoundingClientRect(),n=r/(this.designWidth/100);globalThis.document.documentElement.style.fontSize="".concat(n,"px"),globalThis.document.documentElement.style.fontSize="".concat(this.correctRem(n),"px")}correctRem(r){const{document:n}=globalThis,s=n.createElement("div");s.style.cssText="width:1rem;height:0;overflow:hidden;position:absolute;z-index:-1;visibility:hidden;",n.documentElement.appendChild(s);const i=s.offsetWidth;return n.documentElement.removeChild(s),Math.abs(i-r)>1?r**2/i:r}}class Store{constructor(){m(this,"data",{})}set(r,n){this.data[r]=n}get(r){return this.data[r]}}class Node extends eventsExports.EventEmitter{constructor(n){super();m(this,"data");m(this,"style");m(this,"events",[]);m(this,"instance");m(this,"page");m(this,"parent");m(this,"app");m(this,"store",new Store);this.page=n.page,this.parent=n.parent,this.app=n.app,this.setData(n.config),this.listenLifeSafe()}setData(n){this.data=n;const{events:s,style:i}=n;this.events=s||[],this.style=i||{},this.emit("update-data")}destroy(){this.removeAllListeners()}listenLifeSafe(){this.once("created",async n=>{this.once("destroy",()=>{this.instance=null,typeof this.data.destroy=="function"&&this.data.destroy(this),this.listenLifeSafe()}),this.instance=n,await this.runHookCode("created")}),this.once("mounted",async n=>{this.instance=n;const s=this.app.eventQueueMap[n.config.id]||[];for(let i=s.shift();i;i=s.shift())this.app.compActionHandler(i.eventConfig,i.fromCpt,i.args);await this.runHookCode("mounted")})}async runHookCode(n){var i,c,o;if(typeof this.data[n]=="function"){await this.data[n](this);return}const s=this.data[n];if((s==null?void 0:s.hookType)===O.CODE)for(const u of s.hookData){const{codeType:l=t.CODE,codeId:f,params:d={}}=u;let h;const p={app:this.app,params:d};if(l===t.CODE&&typeof f=="string"&&((i=this.app.codeDsl)!=null&&i[f]))h=this.app.codeDsl[f].content;else if(l===t.DATA_SOURCE_METHOD&&Array.isArray(f)&&f.length>1){const g=(c=this.app.dataSourceManager)==null?void 0:c.get(f[0]);h=(o=g==null?void 0:g.methods.find($=>$.name===f[1]))==null?void 0:o.content,p.dataSource=g}h&&typeof h=="function"&&await h(p)}}}class Page extends Node{constructor(n){super(n);m(this,"nodes",new Map);this.setNode(n.config.id,this),n.config.items.forEach(s=>{this.initNode(s,this)})}initNode(n,s){var c,o,u;const i=new Node({config:n,parent:s,page:this,app:this.app});if(this.setNode(n.id,i),n.type==="page-fragment-container"&&n.pageFragmentId){const l=(o=(c=this.app.dsl)==null?void 0:c.items)==null?void 0:o.find(f=>f.id===n.pageFragmentId);l&&(n.items=[l])}(u=n.items)==null||u.forEach(l=>{this.initNode(l,i)})}getNode(n){return this.nodes.get(n)}setNode(n,s){this.nodes.set(n,s)}deleteNode(n){this.nodes.delete(n)}destroy(){super.destroy(),this.nodes.clear()}}const style2Obj=e=>{if(typeof e!="string")return e;const r={};return e.split(";").forEach(n=>{if(!n)return;const s=n.split(":");let i=s.shift(),c=s.join(":");i&&(i=i.replace(/^\s*/,"").replace(/\s*$/,""),c=c.replace(/^\s*/,"").replace(/\s*$/,""),i=i.split("-").map((o,u)=>u>0?"".concat(o[0].toUpperCase()).concat(o.substr(1)):o).join(""),r[i]=c)}),r},fillBackgroundImage=e=>e&&!/^url/.test(e)&&!/^linear-gradient/.test(e)?"url(".concat(e,")"):e,isNumber$1=e=>/^(-?\d+)(\.\d+)?$/.test(e),getTransform=(e,r)=>{if(!e)return[];const n=Object.entries(e).map(([i,c])=>c.trim()?(i==="rotate"&&isNumber$1(c)&&(c="".concat(c,"deg")),r!=="hippy"?"".concat(i,"(").concat(c,")"):{[i]:c}):"");if(r==="hippy")return n;const s=n.join(" ");return s.trim()?s:"none"},transformStyle=(e,r)=>{if(!e)return{};let n={};const s={};typeof e=="string"?n=style2Obj(e):n={...e};const i=r==="hippy",c=["zIndex","opacity","fontWeight"];return Object.entries(n).forEach(([o,u])=>{o==="scale"&&!s.transform&&i?s.transform=[{scale:u}]:o==="backgroundImage"&&!i?u&&(s[o]=fillBackgroundImage(u)):o==="transform"&&typeof u!="string"?s[o]=getTransform(u,r):!c.includes(o)&&u&&/^[-]?[0-9]*[.]?[0-9]*$/.test(u)?s[o]=i?u:"".concat(u/100,"rem"):s[o]=u}),s};class App extends eventsExports.EventEmitter{constructor(n){var s;super();m(this,"env",new Env);m(this,"dsl");m(this,"codeDsl");m(this,"dataSourceManager");m(this,"page");m(this,"useMock",!1);m(this,"platform","mobile");m(this,"jsEngine","browser");m(this,"request");m(this,"components",new Map);m(this,"eventQueueMap",{});m(this,"transformStyle");m(this,"flexible");m(this,"eventList",new Map);m(this,"dataSourceEventList",new Map);this.setEnv(n.ua),this.codeDsl=(s=n.config)==null?void 0:s.codeBlocks,n.platform&&(this.platform=n.platform),n.jsEngine&&(this.jsEngine=n.jsEngine),typeof n.useMock=="boolean"&&(this.useMock=n.useMock),this.jsEngine==="browser"&&(this.flexible=new Flexible({designWidth:n.designWidth})),this.transformStyle=n.transformStyle||(i=>transformStyle(i,this.jsEngine)),n.request&&(this.request=n.request),n.config&&this.setConfig(n.config,n.curPage),bindCommonEventListener(this)}setEnv(n){this.env=new Env(n)}setDesignWidth(n){var s;(s=this.flexible)==null||s.setDesignWidth(n)}setConfig(n,s){var i,c;this.dsl=n,!s&&n.items.length&&(s=n.items[0].id),this.dataSourceManager&&this.dataSourceManager.destroy(),this.dataSourceManager=createDataSourceManager(this,this.useMock),this.codeDsl=n.codeBlocks,this.setPage(s||((c=(i=this.page)==null?void 0:i.data)==null?void 0:c.id))}addPage(){console.info("addPage 已经弃用")}setPage(n){var i,c;const s=(i=this.dsl)==null?void 0:i.items.find(o=>"".concat(o.id)==="".concat(n));if(!s){this.page&&(this.page.destroy(),this.page=void 0),super.emit("page-change");return}s!==((c=this.page)==null?void 0:c.data)&&(this.page&&this.page.destroy(),this.page=new Page({config:s,app:this}),super.emit("page-change",this.page),this.bindEvents())}deletePage(){this.page=void 0}getPage(n){if(!n)return this.page;if(this.page&&"".concat(this.page.data.id)==="".concat(n))return this.page}registerComponent(n,s){this.components.set(n,s)}unregisterComponent(n){this.components.delete(n)}resolveComponent(n){return this.components.get(n)}bindEvents(){var n;if(Array.from(this.eventList.keys()).forEach(s=>{const i=this.eventList.get(s);i&&this.off(i,s)}),this.eventList.clear(),!!this.page){for(const[,s]of this.page.nodes)(n=s.events)==null||n.forEach((i,c)=>{let o="".concat(i.name,"_").concat(s.data.id),u=(f,...d)=>{this.eventHandler(c,f,d)};const l=i.name.split(".");l.length>1&&(o="".concat(l[1],"_").concat(l[0]),u=(f,...d)=>{this.eventHandler(c,s,d)}),this.eventList.set(u,o),this.on(o,u)});this.bindDataSourceEvents()}}emit(n,...s){var o;const[i,...c]=s;return i instanceof Node&&((o=i==null?void 0:i.data)!=null&&o.id)?super.emit("".concat(String(n),"_").concat(i.data.id),i,...c):super.emit(n,...s)}async codeActionHandler(n,s){var u,l;const{codeId:i="",params:c={}}=n;if(!i||isEmpty(this.codeDsl))return;const o=(l=(u=this.codeDsl)==null?void 0:u[i])==null?void 0:l.content;typeof o=="function"&&await o({app:this,params:c,eventParams:s})}async compActionHandler(n,s,i){if(!this.page)throw new Error("当前没有页面");let{method:c,to:o}=n;isArray$2(c)&&([o,c]=c);const u=this.page.getNode(o);if(!u)throw"ID为".concat(o,"的组件不存在");if(isCommonMethod(c))return triggerCommonMethod(c,u);u.instance?typeof u.instance[c]=="function"&&await u.instance[c](s,...i):this.addEventToMap({eventConfig:n,fromCpt:s,args:i})}async dataSourceActionHandler(n,s){var h;const{dataSourceMethod:i=[],params:c={}}=n,[o,u]=i;if(!o||!u)return;const l=(h=this.dataSourceManager)==null?void 0:h.get(o);if(!l)return;const d=(l.methods||[]).find(p=>p.name===u);d&&typeof d.content=="function"&&await d.content({app:this,params:c,dataSource:l,eventParams:s})}destroy(){var n;this.removeAllListeners(),this.page=void 0,(n=this.flexible)==null||n.destroy(),this.flexible=void 0}bindDataSourceEvents(){var n;this.platform!=="editor"&&(Array.from(this.dataSourceEventList.keys()).forEach(s=>{const i=this.dataSourceEventList.get(s);Array.from(i.keys()).forEach(c=>{var l,f,d;const[o,...u]=c.split(".");o===DATA_SOURCE_FIELDS_CHANGE_EVENT_PREFIX?(l=this.dataSourceManager)==null||l.offDataChange(s,u.join("."),i.get(c)):(d=(f=this.dataSourceManager)==null?void 0:f.get(s))==null||d.off(o,i.get(c))})}),(((n=this.dsl)==null?void 0:n.dataSources)||[]).forEach(s=>{var c;const i=(c=this.dataSourceEventList.get(s.id))!=null?c:new Map;(s.events||[]).forEach(o=>{var d,h,p,g;const[u,...l]=((d=o.name)==null?void 0:d.split("."))||[];if(!u)return;const f=(...$)=>{var b;this.eventHandler(o,(b=this.dataSourceManager)==null?void 0:b.get(s.id),$)};i.set(o.name,f),u===DATA_SOURCE_FIELDS_CHANGE_EVENT_PREFIX?(h=this.dataSourceManager)==null||h.onDataChange(s.id,l.join("."),f):(g=(p=this.dataSourceManager)==null?void 0:p.get(s.id))==null||g.on(u,f)}),this.dataSourceEventList.set(s.id,i)}))}async actionHandler(n,s,i){n.actionType===E.COMP?await this.compActionHandler(n,s,i):n.actionType===E.CODE?await this.codeActionHandler(n,i):n.actionType===E.DATA_SOURCE&&await this.dataSourceActionHandler(n,i)}async eventHandler(n,s,i){const c=typeof n=="number"?s.events[n]:n;if(has(c,"actions")){const{actions:o}=c;for(let u=0;u<o.length;u++)if(typeof n=="number"){const l=s.events[n].actions[u];this.actionHandler(l,s,i)}else this.actionHandler(o[u],s,i)}else await this.compActionHandler(c,s,i)}addEventToMap(n){this.eventQueueMap[n.eventConfig.to]?this.eventQueueMap[n.eventConfig.to].push(n):this.eventQueueMap[n.eventConfig.to]=[n]}}const scriptRel="modulepreload",assetsURL=function(e){return"/static/vue3/runtime/page/"+e},seen={},__vitePreload=function(r,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),o=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=Promise.all(n.map(u=>{if(u=assetsURL(u),u in seen)return;seen[u]=!0;const l=u.endsWith(".css"),f=l?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(u,'"]').concat(f)))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":scriptRel,l||(d.as="script",d.crossOrigin=""),d.href=u,o&&d.setAttribute("nonce",o),document.head.appendChild(d),l)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error("Unable to preload CSS for ".concat(u))))})}))}return i.then(()=>r()).catch(c=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=c,window.dispatchEvent(o),!o.defaultPrevented)throw c})},components={page:()=>__vitePreload(()=>import("./index-BicplLQH.js"),__vite__mapDeps([0,1,2])),container:()=>__vitePreload(()=>import("./Container-IwYRRjCv.js"),__vite__mapDeps([3,1,2])),button:()=>__vitePreload(()=>import("./index-DmhHaABp.js"),__vite__mapDeps([4,2])),text:()=>__vitePreload(()=>import("./index-Ddxyt43W.js"),__vite__mapDeps([5,2])),img:()=>__vitePreload(()=>import("./index-CzRIRZob.js"),__vite__mapDeps([6,2])),qrcode:()=>__vitePreload(()=>import("./index-D5otBju9.js"),__vite__mapDeps([7,2])),overlay:()=>__vitePreload(()=>import("./index-DZQmNOvw.js"),__vite__mapDeps([8,2])),"page-fragment-container":()=>__vitePreload(()=>import("./PageFragmentContainer-B-4aH-Rc.js"),__vite__mapDeps([9,10,1,2,11])),"page-fragment":()=>__vitePreload(()=>import("./PageFragment-DCtNB9MZ.js"),__vite__mapDeps([12,1,2])),"iterator-container":()=>__vitePreload(()=>import("./IteratorContainer-IYqmKkrA.js"),__vite__mapDeps([13,10,1,2]))},datasources={},plugins={};var axios$3={exports:{}},bind$2=function(r,n){return function(){for(var i=new Array(arguments.length),c=0;c<i.length;c++)i[c]=arguments[c];return r.apply(n,i)}},bind$1=bind$2,toString=Object.prototype.toString;function isArray(e){return Array.isArray(e)}function isUndefined(e){return typeof e>"u"}function isBuffer(e){return e!==null&&!isUndefined(e)&&e.constructor!==null&&!isUndefined(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function isArrayBuffer(e){return toString.call(e)==="[object ArrayBuffer]"}function isFormData(e){return toString.call(e)==="[object FormData]"}function isArrayBufferView(e){var r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(e):r=e&&e.buffer&&isArrayBuffer(e.buffer),r}function isString(e){return typeof e=="string"}function isNumber(e){return typeof e=="number"}function isObject(e){return e!==null&&typeof e=="object"}function isPlainObject(e){if(toString.call(e)!=="[object Object]")return!1;var r=Object.getPrototypeOf(e);return r===null||r===Object.prototype}function isDate(e){return toString.call(e)==="[object Date]"}function isFile(e){return toString.call(e)==="[object File]"}function isBlob(e){return toString.call(e)==="[object Blob]"}function isFunction(e){return toString.call(e)==="[object Function]"}function isStream(e){return isObject(e)&&isFunction(e.pipe)}function isURLSearchParams(e){return toString.call(e)==="[object URLSearchParams]"}function trim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function forEach(e,r){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),isArray(e))for(var n=0,s=e.length;n<s;n++)r.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&r.call(null,e[i],i,e)}function merge(){var e={};function r(i,c){isPlainObject(e[c])&&isPlainObject(i)?e[c]=merge(e[c],i):isPlainObject(i)?e[c]=merge({},i):isArray(i)?e[c]=i.slice():e[c]=i}for(var n=0,s=arguments.length;n<s;n++)forEach(arguments[n],r);return e}function extend(e,r,n){return forEach(r,function(i,c){n&&typeof i=="function"?e[c]=bind$1(i,n):e[c]=i}),e}function stripBOM(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var utils$8={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim,stripBOM},utils$7=utils$8;function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$1=function(r,n,s){if(!n)return r;var i;if(s)i=s(n);else if(utils$7.isURLSearchParams(n))i=n.toString();else{var c=[];utils$7.forEach(n,function(l,f){l===null||typeof l>"u"||(utils$7.isArray(l)?f=f+"[]":l=[l],utils$7.forEach(l,function(h){utils$7.isDate(h)?h=h.toISOString():utils$7.isObject(h)&&(h=JSON.stringify(h)),c.push(encode(f)+"="+encode(h))}))}),i=c.join("&")}if(i){var o=r.indexOf("#");o!==-1&&(r=r.slice(0,o)),r+=(r.indexOf("?")===-1?"?":"&")+i}return r},utils$6=utils$8;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function(r,n,s){return this.handlers.push({fulfilled:r,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function(r){this.handlers[r]&&(this.handlers[r]=null)};InterceptorManager$1.prototype.forEach=function(r){utils$6.forEach(this.handlers,function(s){s!==null&&r(s)})};var InterceptorManager_1=InterceptorManager$1,utils$5=utils$8,normalizeHeaderName=function(r,n){utils$5.forEach(r,function(i,c){c!==n&&c.toUpperCase()===n.toUpperCase()&&(r[n]=i,delete r[c])})},enhanceError=function(r,n,s,i,c){return r.config=n,s&&(r.code=s),r.request=i,r.response=c,r.isAxiosError=!0,r.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},r},createError,hasRequiredCreateError;function requireCreateError(){if(hasRequiredCreateError)return createError;hasRequiredCreateError=1;var e=enhanceError;return createError=function(n,s,i,c,o){var u=new Error(n);return e(u,s,i,c,o)},createError}var settle,hasRequiredSettle;function requireSettle(){if(hasRequiredSettle)return settle;hasRequiredSettle=1;var e=requireCreateError();return settle=function(n,s,i){var c=i.config.validateStatus;!i.status||!c||c(i.status)?n(i):s(e("Request failed with status code "+i.status,i.config,null,i.request,i))},settle}var cookies,hasRequiredCookies;function requireCookies(){if(hasRequiredCookies)return cookies;hasRequiredCookies=1;var e=utils$8;return cookies=e.isStandardBrowserEnv()?function(){return{write:function(s,i,c,o,u,l){var f=[];f.push(s+"="+encodeURIComponent(i)),e.isNumber(c)&&f.push("expires="+new Date(c).toGMTString()),e.isString(o)&&f.push("path="+o),e.isString(u)&&f.push("domain="+u),l===!0&&f.push("secure"),document.cookie=f.join("; ")},read:function(s){var i=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(s){this.write(s,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cookies}var isAbsoluteURL,hasRequiredIsAbsoluteURL;function requireIsAbsoluteURL(){return hasRequiredIsAbsoluteURL||(hasRequiredIsAbsoluteURL=1,isAbsoluteURL=function(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}),isAbsoluteURL}var combineURLs,hasRequiredCombineURLs;function requireCombineURLs(){return hasRequiredCombineURLs||(hasRequiredCombineURLs=1,combineURLs=function(r,n){return n?r.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):r}),combineURLs}var buildFullPath,hasRequiredBuildFullPath;function requireBuildFullPath(){if(hasRequiredBuildFullPath)return buildFullPath;hasRequiredBuildFullPath=1;var e=requireIsAbsoluteURL(),r=requireCombineURLs();return buildFullPath=function(s,i){return s&&!e(i)?r(s,i):i},buildFullPath}var parseHeaders,hasRequiredParseHeaders;function requireParseHeaders(){if(hasRequiredParseHeaders)return parseHeaders;hasRequiredParseHeaders=1;var e=utils$8,r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return parseHeaders=function(s){var i={},c,o,u;return s&&e.forEach(s.split("\n"),function(f){if(u=f.indexOf(":"),c=e.trim(f.substr(0,u)).toLowerCase(),o=e.trim(f.substr(u+1)),c){if(i[c]&&r.indexOf(c)>=0)return;c==="set-cookie"?i[c]=(i[c]?i[c]:[]).concat([o]):i[c]=i[c]?i[c]+", "+o:o}}),i},parseHeaders}var isURLSameOrigin,hasRequiredIsURLSameOrigin;function requireIsURLSameOrigin(){if(hasRequiredIsURLSameOrigin)return isURLSameOrigin;hasRequiredIsURLSameOrigin=1;var e=utils$8;return isURLSameOrigin=e.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a"),i;function c(o){var u=o;return n&&(s.setAttribute("href",u),u=s.href),s.setAttribute("href",u),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname}}return i=c(window.location.href),function(u){var l=e.isString(u)?c(u):u;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),isURLSameOrigin}var Cancel_1,hasRequiredCancel;function requireCancel(){if(hasRequiredCancel)return Cancel_1;hasRequiredCancel=1;function e(r){this.message=r}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,Cancel_1=e,Cancel_1}var xhr,hasRequiredXhr;function requireXhr(){if(hasRequiredXhr)return xhr;hasRequiredXhr=1;var e=utils$8,r=requireSettle(),n=requireCookies(),s=buildURL$1,i=requireBuildFullPath(),c=requireParseHeaders(),o=requireIsURLSameOrigin(),u=requireCreateError(),l=requireDefaults(),f=requireCancel();return xhr=function(h){return new Promise(function(g,$){var b=h.data,w=h.headers,P=h.responseType,I;function x(){h.cancelToken&&h.cancelToken.unsubscribe(I),h.signal&&h.signal.removeEventListener("abort",I)}e.isFormData(b)&&delete w["Content-Type"];var _=new XMLHttpRequest;if(h.auth){var F=h.auth.username||"",B=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";w.Authorization="Basic "+btoa(F+":"+B)}var Q=i(h.baseURL,h.url);_.open(h.method.toUpperCase(),s(Q,h.params,h.paramsSerializer),!0),_.timeout=h.timeout;function J(){if(_){var L="getAllResponseHeaders"in _?c(_.getAllResponseHeaders()):null,D=!P||P==="text"||P==="json"?_.responseText:_.response,W={data:D,status:_.status,statusText:_.statusText,headers:L,config:h,request:_};r(function(A){g(A),x()},function(A){$(A),x()},W),_=null}}if("onloadend"in _?_.onloadend=J:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(J)},_.onabort=function(){_&&($(u("Request aborted",h,"ECONNABORTED",_)),_=null)},_.onerror=function(){$(u("Network Error",h,null,_)),_=null},_.ontimeout=function(){var D=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",W=h.transitional||l.transitional;h.timeoutErrorMessage&&(D=h.timeoutErrorMessage),$(u(D,h,W.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",_)),_=null},e.isStandardBrowserEnv()){var V=(h.withCredentials||o(Q))&&h.xsrfCookieName?n.read(h.xsrfCookieName):void 0;V&&(w[h.xsrfHeaderName]=V)}"setRequestHeader"in _&&e.forEach(w,function(D,W){typeof b>"u"&&W.toLowerCase()==="content-type"?delete w[W]:_.setRequestHeader(W,D)}),e.isUndefined(h.withCredentials)||(_.withCredentials=!!h.withCredentials),P&&P!=="json"&&(_.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&_.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&_.upload&&_.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(I=function(L){_&&($(!L||L&&L.type?new f("canceled"):L),_.abort(),_=null)},h.cancelToken&&h.cancelToken.subscribe(I),h.signal&&(h.signal.aborted?I():h.signal.addEventListener("abort",I))),b||(b=null),_.send(b)})},xhr}var defaults_1,hasRequiredDefaults;function requireDefaults(){if(hasRequiredDefaults)return defaults_1;hasRequiredDefaults=1;var e=utils$8,r=normalizeHeaderName,n=enhanceError,s={"Content-Type":"application/x-www-form-urlencoded"};function i(l,f){!e.isUndefined(l)&&e.isUndefined(l["Content-Type"])&&(l["Content-Type"]=f)}function c(){var l;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(l=requireXhr()),l}function o(l,f,d){if(e.isString(l))try{return(f||JSON.parse)(l),e.trim(l)}catch(h){if(h.name!=="SyntaxError")throw h}return(0,JSON.stringify)(l)}var u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:c(),transformRequest:[function(f,d){return r(d,"Accept"),r(d,"Content-Type"),e.isFormData(f)||e.isArrayBuffer(f)||e.isBuffer(f)||e.isStream(f)||e.isFile(f)||e.isBlob(f)?f:e.isArrayBufferView(f)?f.buffer:e.isURLSearchParams(f)?(i(d,"application/x-www-form-urlencoded;charset=utf-8"),f.toString()):e.isObject(f)||d&&d["Content-Type"]==="application/json"?(i(d,"application/json"),o(f)):f}],transformResponse:[function(f){var d=this.transitional||u.transitional,h=d&&d.silentJSONParsing,p=d&&d.forcedJSONParsing,g=!h&&this.responseType==="json";if(g||p&&e.isString(f)&&f.length)try{return JSON.parse(f)}catch($){if(g)throw $.name==="SyntaxError"?n($,this,"E_JSON_PARSE"):$}return f}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(f){return f>=200&&f<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return e.forEach(["delete","get","head"],function(f){u.headers[f]={}}),e.forEach(["post","put","patch"],function(f){u.headers[f]=e.merge(s)}),defaults_1=u,defaults_1}var utils$4=utils$8,defaults$2=requireDefaults(),transformData$1=function(r,n,s){var i=this||defaults$2;return utils$4.forEach(s,function(o){r=o.call(i,r,n)}),r},isCancel$1,hasRequiredIsCancel;function requireIsCancel(){return hasRequiredIsCancel||(hasRequiredIsCancel=1,isCancel$1=function(r){return!!(r&&r.__CANCEL__)}),isCancel$1}var utils$3=utils$8,transformData=transformData$1,isCancel=requireIsCancel(),defaults$1=requireDefaults(),Cancel=requireCancel();function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Cancel("canceled")}var dispatchRequest$1=function(r){throwIfCancellationRequested(r),r.headers=r.headers||{},r.data=transformData.call(r,r.data,r.headers,r.transformRequest),r.headers=utils$3.merge(r.headers.common||{},r.headers[r.method]||{},r.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],function(i){delete r.headers[i]});var n=r.adapter||defaults$1.adapter;return n(r).then(function(i){return throwIfCancellationRequested(r),i.data=transformData.call(r,i.data,i.headers,r.transformResponse),i},function(i){return isCancel(i)||(throwIfCancellationRequested(r),i&&i.response&&(i.response.data=transformData.call(r,i.response.data,i.response.headers,r.transformResponse))),Promise.reject(i)})},utils$2=utils$8,mergeConfig$2=function(r,n){n=n||{};var s={};function i(d,h){return utils$2.isPlainObject(d)&&utils$2.isPlainObject(h)?utils$2.merge(d,h):utils$2.isPlainObject(h)?utils$2.merge({},h):utils$2.isArray(h)?h.slice():h}function c(d){if(utils$2.isUndefined(n[d])){if(!utils$2.isUndefined(r[d]))return i(void 0,r[d])}else return i(r[d],n[d])}function o(d){if(!utils$2.isUndefined(n[d]))return i(void 0,n[d])}function u(d){if(utils$2.isUndefined(n[d])){if(!utils$2.isUndefined(r[d]))return i(void 0,r[d])}else return i(void 0,n[d])}function l(d){if(d in n)return i(r[d],n[d]);if(d in r)return i(void 0,r[d])}var f={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:l};return utils$2.forEach(Object.keys(r).concat(Object.keys(n)),function(h){var p=f[h]||c,g=p(h);utils$2.isUndefined(g)&&p!==l||(s[h]=g)}),s},data,hasRequiredData;function requireData(){return hasRequiredData||(hasRequiredData=1,data={version:"0.25.0"}),data}var VERSION=requireData().version,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(e,r){validators$1[e]=function(s){return typeof s===e||"a"+(r<1?"n ":" ")+e}});var deprecatedWarnings={};validators$1.transitional=function(r,n,s){function i(c,o){return"[Axios v"+VERSION+"] Transitional option '"+c+"'"+o+(s?". "+s:"")}return function(c,o,u){if(r===!1)throw new Error(i(o," has been removed"+(n?" in "+n:"")));return n&&!deprecatedWarnings[o]&&(deprecatedWarnings[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),r?r(c,o,u):!0}};function assertOptions(e,r,n){if(typeof e!="object")throw new TypeError("options must be an object");for(var s=Object.keys(e),i=s.length;i-- >0;){var c=s[i],o=r[c];if(o){var u=e[c],l=u===void 0||o(u,c,e);if(l!==!0)throw new TypeError("option "+c+" must be "+l);continue}if(n!==!0)throw Error("Unknown option "+c)}}var validator$1={assertOptions,validators:validators$1},utils$1=utils$8,buildURL=buildURL$1,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function(r,n){if(typeof r=="string"?(n=n||{},n.url=r):n=r||{},!n.url)throw new Error("Provided config url is not valid");n=mergeConfig$1(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var s=n.transitional;s!==void 0&&validator.assertOptions(s,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var i=[],c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(c=c&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});var o=[];this.interceptors.response.forEach(function(g){o.push(g.fulfilled,g.rejected)});var u;if(!c){var l=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(o),u=Promise.resolve(n);l.length;)u=u.then(l.shift(),l.shift());return u}for(var f=n;i.length;){var d=i.shift(),h=i.shift();try{f=d(f)}catch(p){h(p);break}}try{u=dispatchRequest(f)}catch(p){return Promise.reject(p)}for(;o.length;)u=u.then(o.shift(),o.shift());return u};Axios$1.prototype.getUri=function(r){if(!r.url)throw new Error("Provided config url is not valid");return r=mergeConfig$1(this.defaults,r),buildURL(r.url,r.params,r.paramsSerializer).replace(/^\?/,"")};utils$1.forEach(["delete","get","head","options"],function(r){Axios$1.prototype[r]=function(n,s){return this.request(mergeConfig$1(s||{},{method:r,url:n,data:(s||{}).data}))}});utils$1.forEach(["post","put","patch"],function(r){Axios$1.prototype[r]=function(n,s,i){return this.request(mergeConfig$1(i||{},{method:r,url:n,data:s}))}});var Axios_1=Axios$1,CancelToken_1,hasRequiredCancelToken;function requireCancelToken(){if(hasRequiredCancelToken)return CancelToken_1;hasRequiredCancelToken=1;var e=requireCancel();function r(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(o){s=o});var i=this;this.promise.then(function(c){if(i._listeners){var o,u=i._listeners.length;for(o=0;o<u;o++)i._listeners[o](c);i._listeners=null}}),this.promise.then=function(c){var o,u=new Promise(function(l){i.subscribe(l),o=l}).then(c);return u.cancel=function(){i.unsubscribe(o)},u},n(function(o){i.reason||(i.reason=new e(o),s(i.reason))})}return r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]},r.prototype.unsubscribe=function(s){if(this._listeners){var i=this._listeners.indexOf(s);i!==-1&&this._listeners.splice(i,1)}},r.source=function(){var s,i=new r(function(o){s=o});return{token:i,cancel:s}},CancelToken_1=r,CancelToken_1}var spread,hasRequiredSpread;function requireSpread(){return hasRequiredSpread||(hasRequiredSpread=1,spread=function(r){return function(s){return r.apply(null,s)}}),spread}var isAxiosError,hasRequiredIsAxiosError;function requireIsAxiosError(){if(hasRequiredIsAxiosError)return isAxiosError;hasRequiredIsAxiosError=1;var e=utils$8;return isAxiosError=function(n){return e.isObject(n)&&n.isAxiosError===!0},isAxiosError}var utils=utils$8,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=requireDefaults();function createInstance(e){var r=new Axios(e),n=bind(Axios.prototype.request,r);return utils.extend(n,Axios.prototype,r),utils.extend(n,r),n.create=function(i){return createInstance(mergeConfig(e,i))},n}var axios$2=createInstance(defaults);axios$2.Axios=Axios;axios$2.Cancel=requireCancel();axios$2.CancelToken=requireCancelToken();axios$2.isCancel=requireIsCancel();axios$2.VERSION=requireData().version;axios$2.all=function(r){return Promise.all(r)};axios$2.spread=requireSpread();axios$2.isAxiosError=requireIsAxiosError();axios$3.exports=axios$2;axios$3.exports.default=axios$2;var axiosExports=axios$3.exports,axios=axiosExports;const axios$1=getDefaultExportFromCjs(axios),requestHandler=function(e){return e},responseHandler=function(e){return e},service=axios$1.create({withCredentials:!0,timeout:7e3});service.interceptors.request.use(requestHandler);service.interceptors.response.use(responseHandler);const request={install(e){e.provide("request",service)}},useDsl=e=>{var n,s;const r=VueDemi.ref(((n=e==null?void 0:e.page)==null?void 0:n.data)||{});return(s=e==null?void 0:e.dataSourceManager)==null||s.on("update-data",(i,c,o)=>{i.forEach(u=>{isPage(u)?r.value=u:replaceChildNode(VueDemi.reactive(u),[r.value])}),e&&VueDemi.nextTick(()=>{e.emit("replaced-node",{nodes:i,sourceId:c,...o})})}),{pageConfig:r}},_sfc_main=Vue.defineComponent({__name:"App",setup(e){const r=Vue.inject("app"),{pageConfig:n}=useDsl(r);return r==null||r.on("page-change",s=>{if(!s)throw new Error("页面不存在");addParamToUrl({page:s.data.id},window)}),(s,i)=>{const c=Vue.resolveComponent("magic-ui-page");return Vue.openBlock(),Vue.createBlock(c,{config:Vue.unref(n)},null,8,["config"])}}}),getLocalConfig=()=>{const configStr=localStorage.getItem("magicDSL");if(!configStr)return[];try{return[eval("(".concat(configStr,")"))]}catch(e){return[]}};DataSourceManager.registerObservedData(DeepObservedData);const vueApp=Vue.createApp(_sfc_main);vueApp.use(request);const dsl=((getUrlParam("localPreview")?getLocalConfig():window.magicDSL)||[])[0]||{},app=new App({ua:window.navigator.userAgent,config:dsl,request:service,curPage:getUrlParam("page"),useMock:!!getUrlParam("useMock")});app.setDesignWidth(app.env.isWeb?window.document.documentElement.getBoundingClientRect().width:375);Object.entries(components).forEach(([e,r])=>{vueApp.component("magic-ui-".concat(e),Vue.defineAsyncComponent(r))});Object.values(plugins).forEach(e=>{vueApp.use(e,{app})});registerDataSourceOnDemand(dsl,datasources).then(e=>{Object.entries(e).forEach(([r,n])=>{DataSourceManager.register(r,n)}),vueApp.config.globalProperties.app=app,vueApp.provide("app",app),vueApp.mount("#app")});export{__vite_legacy_guard};
//# sourceMappingURL=index-KT1dbgar.js.map
